"""Unit tests for sasview_utils.py."""

import fileinput
import numpy
import pandas
import unittest

from collections import defaultdict

from photon.lib import sasview_utils
from photon.lib import test_utils
from photon.lib import time_utils


# Intentional formatting for readability:
# pylint: disable=bad-continuation,line-too-long


class TestSASView(unittest.TestCase):
    """Unit tests for SASView."""

    sas_file_path = test_utils.get_files_of_type('Uncategorized/sasview_output')[0]
    sas_view_file = fileinput.FileInput(sas_file_path, openhook=fileinput.hook_compressed)
    sas_view_lines = [line for line in sas_view_file]
    sasview = sasview_utils.SASView(sas_view_lines, 'CT1')

    def test_enclosures(self):
        """Test the enclosures property."""
        expected = [
            'Command line: /opt/Purity/bin/sas_view.py, enclosures',
            'Revision: 45446',
            '',
            'Enclosure information:',
            '                                            IOM 0:                          IOM 1:',
            'Type ID Serial#            Logical ID       Serial #           Revision     Serial #           Revision',
            '---- -- ------------------ ---------------- ------------------ ------------ ------------------ ------------',
            'SH   01 SHG0998507G4F72    50050cc10c22b1fb IMS0944239G35HV    3516|3.5.22  IMS0944239G35KJ    3516|3.5.22',
            'SH   00 SHU0951731L51LD    50050cc10c2018a1 IMS0944239G0F0Y    3516|3.5.22  IMS0944239G0F16    3516|3.5.22',
            'SH   02 SHG0979523G45FL    50050cc10c21a10e IMS0944239G2RBA    3516|3.5.22  IMS0944239G2SV6    3516|3.5.22',
            '',
            'Error information:',
            'No errors detected.',
            '',
            ''
        ]
        result = self.sasview.enclosures
        self.assertEqual(result, expected)

    def test_enclosures_dict(self):
        """Test the enclosures_dict property."""
        expected = defaultdict(list, {
            'Command line': '/opt/Purity/bin/sas_view.py enclosures',
            'Enclosure information': [
                '',
                '                                            IOM 0:                          IOM 1:',
                'Type ID Serial#            Logical ID       Serial #           Revision     Serial #           Revision',
                '---- -- ------------------ ---------------- ------------------ ------------ ------------------ ------------',
                'SH   01 SHG0998507G4F72    50050cc10c22b1fb IMS0944239G35HV    3516|3.5.22  IMS0944239G35KJ    3516|3.5.22',
                'SH   00 SHU0951731L51LD    50050cc10c2018a1 IMS0944239G0F0Y    3516|3.5.22  IMS0944239G0F16    3516|3.5.22',
                'SH   02 SHG0979523G45FL    50050cc10c21a10e IMS0944239G2RBA    3516|3.5.22  IMS0944239G2SV6    3516|3.5.22',
                ''
            ],
            'Error information': ['', 'No errors detected.', '', ''],
            'Revision': '45446',
            'Start time': '',
            'End time': '',
            }
        )
        result = self.sasview.enclosures_dict
        self.assertEqual(result, expected)

    def test_diag_topology_all(self):
        """Test the diag_topology_all property."""
        expected = [
            'Command line: /opt/Purity/bin/sas_view.py, diag, topology, all',
            'Revision: 45446',
            '',
            'gamma',
            '',
            'Slot listing:',
            'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly       scsih PCI           lsiutil name   model',
            '----- ----- ---------- ------------ ------------ ------------ -------------- ----- ------------- ------- ----- --------',
            '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G       8 0000:44:00.0  0000002 ioc1  SAS2308',
            '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G       7 0000:43:00.0  0000001 ioc0  SAS2308',
            '',
            'Topology information for slot 2:',
            '---------------------------------',
            'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly       scsih PCI           lsiutil name   model',
            '----- ----- ---------- ------------ ------------ ------------ -------------- ----- ------------- ------- ----- --------',
            '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G       8 0000:44:00.0  0000002 ioc1  SAS2308',
            '',
            'Detailed topology: {PHY Name: (SAS address:PHY no)(dvhd), (invalid dwords, running disparity, loss of dword sync, phy reset problem)}',
            'PCI Slot 2',
            '|--Port 0',
            '| | |-Link  0: (500605b005a6fbd4:04)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:11)(0009)',
            '| | |-Link  1: (500605b005a6fbd4:05)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:10)(0009)',
            '| | |-Link  2: (500605b005a6fbd4:06)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:09)(0009)',
            '| | \\-Link  3: (500605b005a6fbd4:07)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:08)(0009)',
            '| |-SH01, IOM 0, Incoming port: A',
            '| | |-Slot 00: (50050cc117fab43f:35)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c6d2:00)(0022), (24935, 24935, 00001, 00001), (sdct, sg100)',
            '| | |-Slot 01: (50050cc117fab43f:34)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5658d:00)(0021), (00000, 00000, 00000, 00000), (sdcs, sg99)',
            '| | |-Slot 02: (50050cc117fab43f:33)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f38fa9:00)(0020), (00000, 00000, 00000, 00000), (sdcr, sg98)',
            '| | |-Slot 03: (50050cc117fab43f:32)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53ed5:00)(001f), (00000, 00000, 00000, 00000), (sdcq, sg97)',
            '| | |-Slot 04: (50050cc117fab43f:31)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5678d:00)(001e), (00000, 00000, 00000, 00000), (sdcp, sg96)',
            '| | |-Slot 05: (50050cc117fab43f:30)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e9:00)(001d), (00000, 00000, 00000, 00000), (sdco, sg95)',
            '| | |-Slot 06: (50050cc117fab43f:29)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a75:00)(001c), (00000, 00000, 00000, 00000), (sdcn, sg94)',
            '| | |-Slot 07: (50050cc117fab43f:28)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5659d:00)(001b), (00000, 00000, 00000, 00000), (sdcm, sg93)',
            '| | |-Slot 08: (50050cc117fab43f:27)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56561:00)(001a), (00000, 00000, 00000, 00000), (sdcl, sg92)',
            '| | |-Slot 09: (50050cc117fab43f:26)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54ab5:00)(0019), (00000, 00000, 00000, 00000), (sdck, sg91)',
            '| | |-Slot 10: (50050cc117fab43f:25)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5653d:00)(0018), (00000, 00000, 00000, 00000), (sdcj, sg90)',
            '| | |-Slot 11: (50050cc117fab43f:24)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56555:00)(0017), (00000, 00000, 00000, 00001), (sdci, sg89)',
            '| | |-Slot 12: (50050cc117fab43f:23)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f1:00)(0016), (00000, 00000, 00000, 00000), (sdch, sg88)',
            '| | |-Slot 13: (50050cc117fab43f:22)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f565dd:00)(0015), (00000, 00000, 00000, 00000), (sdcg, sg87)',
            '| | |-Slot 14: (50050cc117fab43f:21)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e5:00)(0014), (00000, 00000, 00000, 00000), (sdcf, sg86)',
            '| | |-Slot 15: (50050cc117fab43f:20)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e1:00)(0013), (00000, 00000, 00000, 00000), (sdce, sg85)',
            '| | |-Slot 16: (50050cc117fab43f:19)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f563ed:00)(0012), (00000, 00000, 00000, 00000), (sdcd, sg84)',
            '| | |-Slot 17: (50050cc117fab43f:18)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56575:00)(0011), (00000, 00000, 00000, 00001), (sdcc, sg83)',
            '| | |-Slot 18: (50050cc117fab43f:17)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f5:00)(0010), (00000, 00000, 00000, 00000), (sdcb, sg82)',
            '| | |-Slot 19: (50050cc117fab43f:16)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56801:00)(000f), (00000, 00000, 00000, 00000), (sdca, sg81)',
            '| | |-Slot 20: (50050cc117fab43f:15)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54c19:00)(000e), (00000, 00000, 00000, 00000), (sdbz, sg80)',
            '| | |-Slot 21: (50050cc117fab43f:14)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53e79:00)(000d), (00000, 00000, 00000, 00000), (sdby, sg79)',
            '| | |-Slot 22: (50050cc117fab43f:13)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a7d:00)(000c), (00000, 00000, 00000, 00000), (sdbx, sg78)',
            '| | |-Slot 23: (50050cc117fab43f:12)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c762:00)(000b), (24942, 24942, 00001, 00001), (sdbw, sg77)',
            '| | |-----SEP: (50050cc117fab43f:36)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43e:36)(0023), (-, sg101)',
            '| | |--Port A: (50050cc117fab43f:08)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:07)(0005)',
            '| | |--Port A: (50050cc117fab43f:09)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:06)(0005)',
            '| | |--Port A: (50050cc117fab43f:10)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:05)(0005)',
            '| | |--Port A: (50050cc117fab43f:11)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:04)(0005)',
            '| | |--Port B: (50050cc117fab43f:04)(0009), Link down',
            '| | |--Port B: (50050cc117fab43f:05)(0009), Link down',
            '| | |--Port B: (50050cc117fab43f:06)(0009), Link down',
            '| | |--Port B: (50050cc117fab43f:07)(0009), Link down',
            '| | |--Port C: (50050cc117fab43f:00)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:03)(000a)',
            '| | |--Port C: (50050cc117fab43f:01)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:02)(000a)',
            '| | |--Port C: (50050cc117fab43f:02)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:01)(000a)',
            '| | \\--Port C: (50050cc117fab43f:03)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:00)(000a)',
            '| |-SH01, IOM 0, Outgoing port: B, Link Down',
            '| \\-SH01, IOM 0, Outgoing port: C',
            '|   \\- Unknown device (500605b005a72940:03)(000a)',
            '|',
            '\\--Port 1',
            '  | |-Link  0: (500605b005a6fbd0:00)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:11)(0024)',
            '  | |-Link  1: (500605b005a6fbd0:01)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:10)(0024)',
            '  | |-Link  2: (500605b005a6fbd0:02)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:09)(0024)',
            '  | \\-Link  3: (500605b005a6fbd0:03)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:08)(0024)',
            '  |-SH00, IOM 1, Incoming port: A',
            '  | |-Slot 00: (50050cc10ac8e7bf:12)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5000a72b30086935:01)(0027), (00000, 00000, 00003, 00000), (sdcu, sg102)',
            '  | |-Slot 01: (50050cc10ac8e7bf:13)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbb2:01)(0028), (00000, 00000, 00000, 00000), (sdcv, sg103)',
            '  | |-Slot 02: (50050cc10ac8e7bf:23)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1442:01)(0032), (00000, 00000, 00000, 00000), (sddf, sg113)',
            '  | |-Slot 03: (50050cc10ac8e7bf:21)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1176:01)(0030), (00000, 00000, 00000, 00000), (sddd, sg111)',
            '  | |-Slot 04: (50050cc10ac8e7bf:20)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1456:01)(002f), (00000, 00000, 00000, 00000), (sddc, sg110)',
            '  | |-Slot 05: (50050cc10ac8e7bf:19)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af6ca:01)(002e), (00000, 00000, 00000, 00000), (sddb, sg109)',
            '  | |-Slot 06: (50050cc10ac8e7bf:18)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0eb2:01)(002d), (00000, 00000, 00000, 00000), (sdda, sg108)',
            '  | |-Slot 07: (50050cc10ac8e7bf:16)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa26:01)(002b), (00000, 00000, 00000, 00000), (sdcy, sg106)',
            '  | |-Slot 08: (50050cc10ac8e7bf:15)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa66:01)(002a), (00000, 00000, 00000, 00000), (sdcx, sg105)',
            '  | |-Slot 09: (50050cc10ac8e7bf:14)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0e9a:01)(0029), (00000, 00000, 00000, 00000), (sdcw, sg104)',
            '  | |-Slot 10: (50050cc10ac8e7bf:17)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff7a:01)(002c), (00000, 00000, 00000, 00000), (sdcz, sg107)',
            '  | |-Slot 11: (50050cc10ac8e7bf:22)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e159a:01)(0031), (00000, 00000, 00000, 00000), (sdde, sg112)',
            '  | |-Slot 12: (50050cc10ac8e7bf:28)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1512:01)(0037), (00000, 00000, 00000, 00000), (sddk, sg118)',
            '  | |-Slot 13: (50050cc10ac8e7bf:27)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff8a:01)(0036), (00000, 00000, 00000, 00000), (sddj, sg117)',
            '  | |-Slot 14: (50050cc10ac8e7bf:26)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa62:01)(0035), (00000, 00000, 00000, 00000), (sddi, sg116)',
            '  | |-Slot 15: (50050cc10ac8e7bf:29)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e14de:01)(0038), (00000, 00000, 00000, 00000), (sddl, sg119)',
            '  | |-Slot 16: (50050cc10ac8e7bf:32)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e15a6:01)(003b), (00000, 00000, 00000, 00000), (sddo, sg122)',
            '  | |-Slot 17: (50050cc10ac8e7bf:31)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afcca:01)(003a), (00000, 00000, 00000, 00000), (sddn, sg121)',
            '  | |-Slot 18: (50050cc10ac8e7bf:30)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af77e:01)(0039), (00000, 00000, 00000, 00000), (sddm, sg120)',
            '  | |-Slot 19: (50050cc10ac8e7bf:25)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af7e2:01)(0034), (00000, 00000, 00000, 00000), (sddh, sg115)',
            '  | |-Slot 20: (50050cc10ac8e7bf:24)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbe6:01)(0033), (00000, 00000, 00000, 00000), (sddg, sg114)',
            '  | |-Slot 21: (50050cc10ac8e7bf:33)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afb92:01)(003c), (00000, 00000, 00000, 00000), (sddp, sg123)',
            '  | |-Slot 22: (50050cc10ac8e7bf:34)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0ef2:01)(003d), (00000, 00000, 00000, 00000), (sddq, sg124)',
            '  | |-Slot 23: (50050cc10ac8e7bf:35)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5002538454114303:01)(003e), (00000, 00000, 00000, 00001), (sddr, sg125)',
            '  | |-----SEP: (50050cc10ac8e7bf:36)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7be:36)(003f), (-, sg126)',
            '  | |--Port A: (50050cc10ac8e7bf:08)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:03)(0001)',
            '  | |--Port A: (50050cc10ac8e7bf:09)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:02)(0001)',
            '  | |--Port A: (50050cc10ac8e7bf:10)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:01)(0001)',
            '  | |--Port A: (50050cc10ac8e7bf:11)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:00)(0001)',
            '  | |--Port B: (50050cc10ac8e7bf:04)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:04)(0026)',
            '  | |--Port B: (50050cc10ac8e7bf:05)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:05)(0026)',
            '  | |--Port B: (50050cc10ac8e7bf:06)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:06)(0026)',
            '  | |--Port B: (50050cc10ac8e7bf:07)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:07)(0026)',
            '  | |--Port C: (50050cc10ac8e7bf:00)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:07)(0025)',
            '  | |--Port C: (50050cc10ac8e7bf:01)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:06)(0025)',
            '  | |--Port C: (50050cc10ac8e7bf:02)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:05)(0025)',
            '  | \\--Port C: (50050cc10ac8e7bf:03)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:04)(0025)',
            '  |-SH00, IOM 1, Outgoing port: B',
            '  | |-SH02, IOM 1, Incoming port: B',
            '  | | |-Slot 00: (50050cc10f10813f:12)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdd92:01)(0040), (00000, 00000, 00000, 00000), (sdds, sg127)',
            '  | | |-Slot 01: (50050cc10f10813f:13)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf3a:01)(0041), (00000, 00000, 00000, 00000), (sddt, sg128)',
            '  | | |-Slot 02: (50050cc10f10813f:23)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2ea:01)(004b), (00000, 00000, 00000, 00000), (sded, sg138)',
            '  | | |-Slot 03: (50050cc10f10813f:21)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2f2:01)(0049), (00000, 00000, 00000, 00000), (sdeb, sg136)',
            '  | | |-Slot 04: (50050cc10f10813f:20)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf36:01)(0048), (00000, 00000, 00000, 00000), (sdea, sg135)',
            '  | | |-Slot 05: (50050cc10f10813f:19)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfddee:01)(0047), (00000, 00000, 00000, 00000), (sddz, sg134)',
            '  | | |-Slot 06: (50050cc10f10813f:18)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdcee:01)(0046), (00000, 00000, 00000, 00000), (sddy, sg133)',
            '  | | |-Slot 07: (50050cc10f10813f:16)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdb9e:01)(0044), (00000, 00000, 00000, 00000), (sddw, sg131)',
            '  | | |-Slot 08: (50050cc10f10813f:15)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e3a6:01)(0043), (00000, 00000, 00000, 00000), (sddv, sg130)',
            '  | | |-Slot 09: (50050cc10f10813f:14)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e462:01)(0042), (00000, 00000, 00000, 00000), (sddu, sg129)',
            '  | | |-Slot 10: (50050cc10f10813f:17)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf56:01)(0045), (00000, 00000, 00000, 00000), (sddx, sg132)',
            '  | | |-Slot 11: (50050cc10f10813f:22)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf06:01)(004a), (00000, 00000, 00000, 00000), (sdec, sg137)',
            '  | | |-Slot 12: (50050cc10f10813f:28)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfc95e:01)(0050), (00000, 00000, 00000, 00000), (sdei, sg143)',
            '  | | |-Slot 13: (50050cc10f10813f:27)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe12a:01)(004f), (00000, 00000, 00000, 00000), (sdeh, sg142)',
            '  | | |-Slot 14: (50050cc10f10813f:26)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe09e:01)(004e), (00000, 00000, 00000, 00000), (sdeg, sg141)',
            '  | | |-Slot 15: (50050cc10f10813f:29)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde76:01)(0051), (00000, 00000, 00000, 00000), (sdej, sg144)',
            '  | | |-Slot 16: (50050cc10f10813f:32)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe30a:01)(0054), (00000, 00000, 00000, 00000), (sdem, sg147)',
            '  | | |-Slot 17: (50050cc10f10813f:31)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe012:01)(0053), (00000, 00000, 00000, 00000), (sdel, sg146)',
            '  | | |-Slot 18: (50050cc10f10813f:30)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde36:01)(0052), (00000, 00000, 00000, 00000), (sdek, sg145)',
            '  | | |-Slot 19: (50050cc10f10813f:25)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfd02a:01)(004d), (00000, 00000, 00000, 00001), (sdef, sg140)',
            '  | | |-Slot 20: (50050cc10f10813f:24)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdeb2:01)(004c), (00000, 00000, 00000, 00000), (sdee, sg139)',
            '  | | |-Slot 21: (50050cc10f10813f:33)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe11a:01)(0055), (00000, 00000, 00000, 00000), (sden, sg148)',
            '  | | |-Slot 22: (50050cc10f10813f:34)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0a6:01)(0056), (00000, 00000, 00000, 00000), (sdeo, sg149)',
            '  | | |-Slot 23: (50050cc10f10813f:35)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0e2:01)(0057), (00000, 00000, 00000, 00000), (sdep, sg150)',
            '  | | |-----SEP: (50050cc10f10813f:36)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813e:36)(0058), (-, sg151)',
            '  | | |--Port A: (50050cc10f10813f:08)(0026), Link down',
            '  | | |--Port A: (50050cc10f10813f:09)(0026), Link down',
            '  | | |--Port A: (50050cc10f10813f:10)(0026), Link down',
            '  | | |--Port A: (50050cc10f10813f:11)(0026), Link down',
            '  | | |--Port B: (50050cc10f10813f:04)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:04)(0024)',
            '  | | |--Port B: (50050cc10f10813f:05)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:05)(0024)',
            '  | | |--Port B: (50050cc10f10813f:06)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:06)(0024)',
            '  | | |--Port B: (50050cc10f10813f:07)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:07)(0024)',
            '  | | |--Port C: (50050cc10f10813f:00)(0026), Link down',
            '  | | |--Port C: (50050cc10f10813f:01)(0026), Link down',
            '  | | |--Port C: (50050cc10f10813f:02)(0026), Link down',
            '  | | \\--Port C: (50050cc10f10813f:03)(0026), Link down',
            '  | |-SH02, IOM 1, Outgoing port: A, Link Down',
            '  | \\-SH02, IOM 1, Outgoing port: C, Link Down',
            '  \\-SH00, IOM 1, Outgoing port: C',
            '    \\- Unknown device (500605b005a72944:07)(0025)',
            '',
            '',
            'Slot summary:',
            '2.0] <---> [A:1.0:B*',
            '                  \\C] <---> [Unknown device 500605b005a72940',
            '',
            '2.1] <---> [A:0.1:B] <---> [B:2.1:A*',
            '                  |               \\C*',
            '                  \\C] <---> [Unknown device 500605b005a72944',
            '',
            '',
            'Topology information for slot 3:',
            '---------------------------------',
            'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly       scsih PCI           lsiutil name   model',
            '----- ----- ---------- ------------ ------------ ------------ -------------- ----- ------------- ------- ----- --------',
            '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G       7 0000:43:00.0  0000001 ioc0  SAS2308',
            '',
            'Detailed topology: {PHY Name: (SAS address:PHY no)(dvhd), (invalid dwords, running disparity, loss of dword sync, phy reset problem)}',
            'PCI Slot 3',
            '|--Port 0',
            '| | |-Link  0: (500605b005a728d4:04)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:03)(0009)',
            '| | |-Link  1: (500605b005a728d4:05)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:02)(0009)',
            '| | |-Link  2: (500605b005a728d4:06)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:01)(0009)',
            '| | \\-Link  3: (500605b005a728d4:07)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:00)(0009)',
            '| |-SH01, IOM 1, Incoming port: C',
            '| | |-Slot 00: (50050cc117fab0ff:12)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c6d3:01)(000b), (24425, 24681, 00001, 00001), (sdc, sg2)',
            '| | |-Slot 01: (50050cc117fab0ff:13)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5658e:01)(000c), (00000, 00000, 00000, 00000), (sdd, sg3)',
            '| | |-Slot 02: (50050cc117fab0ff:23)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f38faa:01)(0016), (00000, 00000, 00000, 00000), (sdn, sg13)',
            '| | |-Slot 03: (50050cc117fab0ff:21)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53ed6:01)(0014), (00000, 00000, 00000, 00000), (sdl, sg11)',
            '| | |-Slot 04: (50050cc117fab0ff:20)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5678e:01)(0013), (00000, 00000, 00000, 00000), (sdk, sg10)',
            '| | |-Slot 05: (50050cc117fab0ff:19)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567ea:01)(0012), (00000, 00000, 00000, 00000), (sdj, sg9)',
            '| | |-Slot 06: (50050cc117fab0ff:18)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a76:01)(0011), (00000, 00000, 00000, 00000), (sdi, sg8)',
            '| | |-Slot 07: (50050cc117fab0ff:16)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5659e:01)(000f), (00000, 00000, 00000, 00000), (sdg, sg6)',
            '| | |-Slot 08: (50050cc117fab0ff:15)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56562:01)(000e), (00000, 00000, 00000, 00000), (sdf, sg5)',
            '| | |-Slot 09: (50050cc117fab0ff:14)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54ab6:01)(000d), (00000, 00000, 00000, 00000), (sde, sg4)',
            '| | |-Slot 10: (50050cc117fab0ff:17)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5653e:01)(0010), (00000, 00000, 00000, 00000), (sdh, sg7)',
            '| | |-Slot 11: (50050cc117fab0ff:22)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56556:01)(0015), (00000, 00000, 00000, 00001), (sdm, sg12)',
            '| | |-Slot 12: (50050cc117fab0ff:28)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f2:01)(001b), (00000, 00000, 00000, 00000), (sds, sg18)',
            '| | |-Slot 13: (50050cc117fab0ff:27)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f565de:01)(001a), (00000, 00000, 00000, 00000), (sdr, sg17)',
            '| | |-Slot 14: (50050cc117fab0ff:26)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e6:01)(0019), (00000, 00000, 00000, 00000), (sdq, sg16)',
            '| | |-Slot 15: (50050cc117fab0ff:29)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e2:01)(001c), (00000, 00000, 00000, 00000), (sdt, sg19)',
            '| | |-Slot 16: (50050cc117fab0ff:32)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f563ee:01)(001f), (00000, 00000, 00000, 00000), (sdw, sg22)',
            '| | |-Slot 17: (50050cc117fab0ff:31)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56576:01)(001e), (00000, 00000, 00000, 00001), (sdv, sg21)',
            '| | |-Slot 18: (50050cc117fab0ff:30)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f6:01)(001d), (00000, 00000, 00000, 00000), (sdu, sg20)',
            '| | |-Slot 19: (50050cc117fab0ff:25)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56802:01)(0018), (00000, 00000, 00000, 00000), (sdp, sg15)',
            '| | |-Slot 20: (50050cc117fab0ff:24)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54c1a:01)(0017), (00000, 00000, 00000, 00000), (sdo, sg14)',
            '| | |-Slot 21: (50050cc117fab0ff:33)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53e7a:01)(0020), (00000, 00000, 00000, 00000), (sdx, sg23)',
            '| | |-Slot 22: (50050cc117fab0ff:34)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a7e:01)(0021), (00000, 00000, 00000, 00000), (sdy, sg24)',
            '| | |-Slot 23: (50050cc117fab0ff:35)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c763:01)(0022), (24427, 24426, 00001, 00001), (sdz, sg25)',
            '| | |-----SEP: (50050cc117fab0ff:36)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0fe:36)(0023), (-, sg26)',
            '| | |--Port A: (50050cc117fab0ff:08)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:03)(000a)',
            '| | |--Port A: (50050cc117fab0ff:09)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:02)(000a)',
            '| | |--Port A: (50050cc117fab0ff:10)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:01)(000a)',
            '| | |--Port A: (50050cc117fab0ff:11)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:00)(000a)',
            '| | |--Port B: (50050cc117fab0ff:04)(0009), Link down',
            '| | |--Port B: (50050cc117fab0ff:05)(0009), Link down',
            '| | |--Port B: (50050cc117fab0ff:06)(0009), Link down',
            '| | |--Port B: (50050cc117fab0ff:07)(0009), Link down',
            '| | |--Port C: (50050cc117fab0ff:00)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:07)(0005)',
            '| | |--Port C: (50050cc117fab0ff:01)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:06)(0005)',
            '| | |--Port C: (50050cc117fab0ff:02)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:05)(0005)',
            '| | \\--Port C: (50050cc117fab0ff:03)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:04)(0005)',
            '| |-SH01, IOM 1, Outgoing port: A',
            '| | \\- Unknown device (500605b005a728c0:03)(000a)',
            '| \\-SH01, IOM 1, Outgoing port: B, Link Down',
            '|',
            '\\--Port 1',
            '  | |-Link  0: (500605b005a728d0:00)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:03)(0024)',
            '  | |-Link  1: (500605b005a728d0:01)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:02)(0024)',
            '  | |-Link  2: (500605b005a728d0:02)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:01)(0024)',
            '  | \\-Link  3: (500605b005a728d0:03)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:00)(0024)',
            '  |-SH00, IOM 0, Incoming port: C',
            '  | |-Slot 00: (50050cc10ac8deff:35)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5000a72a30086935:00)(003e), (00000, 00000, 00003, 00000), (sdax, sg50)',
            '  | |-Slot 01: (50050cc10ac8deff:34)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbb1:00)(003d), (00000, 00000, 00000, 00000), (sdaw, sg49)',
            '  | |-Slot 02: (50050cc10ac8deff:33)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1441:00)(003c), (00000, 00000, 00000, 00000), (sdav, sg48)',
            '  | |-Slot 03: (50050cc10ac8deff:32)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1175:00)(003b), (00000, 00000, 00000, 00000), (sdau, sg47)',
            '  | |-Slot 04: (50050cc10ac8deff:31)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1455:00)(003a), (00000, 00000, 00000, 00000), (sdat, sg46)',
            '  | |-Slot 05: (50050cc10ac8deff:30)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af6c9:00)(0039), (00000, 00000, 00000, 00000), (sdas, sg45)',
            '  | |-Slot 06: (50050cc10ac8deff:29)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0eb1:00)(0038), (00000, 00000, 00000, 00000), (sdar, sg44)',
            '  | |-Slot 07: (50050cc10ac8deff:28)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa25:00)(0037), (00000, 00000, 00000, 00000), (sdaq, sg43)',
            '  | |-Slot 08: (50050cc10ac8deff:27)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa65:00)(0036), (00000, 00000, 00000, 00000), (sdap, sg42)',
            '  | |-Slot 09: (50050cc10ac8deff:26)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0e99:00)(0035), (00000, 00000, 00000, 00000), (sdao, sg41)',
            '  | |-Slot 10: (50050cc10ac8deff:25)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff79:00)(0034), (00000, 00000, 00000, 00000), (sdan, sg40)',
            '  | |-Slot 11: (50050cc10ac8deff:24)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1599:00)(0033), (00000, 00000, 00000, 00000), (sdam, sg39)',
            '  | |-Slot 12: (50050cc10ac8deff:23)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1511:00)(0032), (00000, 00000, 00000, 00000), (sdal, sg38)',
            '  | |-Slot 13: (50050cc10ac8deff:22)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff89:00)(0031), (00000, 00000, 00000, 00000), (sdak, sg37)',
            '  | |-Slot 14: (50050cc10ac8deff:21)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa61:00)(0030), (00000, 00000, 00000, 00000), (sdaj, sg36)',
            '  | |-Slot 15: (50050cc10ac8deff:20)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e14dd:00)(002f), (00000, 00000, 00000, 00000), (sdai, sg35)',
            '  | |-Slot 16: (50050cc10ac8deff:19)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e15a5:00)(002e), (00000, 00000, 00000, 00000), (sdah, sg34)',
            '  | |-Slot 17: (50050cc10ac8deff:18)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afcc9:00)(002d), (00000, 00000, 00000, 00000), (sdag, sg33)',
            '  | |-Slot 18: (50050cc10ac8deff:17)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af77d:00)(002c), (00000, 00000, 00000, 00000), (sdaf, sg32)',
            '  | |-Slot 19: (50050cc10ac8deff:16)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af7e1:00)(002b), (00000, 00000, 00000, 00000), (sdae, sg31)',
            '  | |-Slot 20: (50050cc10ac8deff:15)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbe5:00)(002a), (00000, 00000, 00000, 00000), (sdad, sg30)',
            '  | |-Slot 21: (50050cc10ac8deff:14)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afb91:00)(0029), (00000, 00000, 00000, 00000), (sdac, sg29)',
            '  | |-Slot 22: (50050cc10ac8deff:13)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0ef1:00)(0028), (00000, 00000, 00000, 00000), (sdab, sg28)',
            '  | |-Slot 23: (50050cc10ac8deff:12)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5002538454114302:00)(0027), (00000, 00000, 00000, 00001), (sdaa, sg27)',
            '  | |-----SEP: (50050cc10ac8deff:36)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8defe:36)(003f), (-, sg51)',
            '  | |--Port A: (50050cc10ac8deff:08)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:07)(0026)',
            '  | |--Port A: (50050cc10ac8deff:09)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:06)(0026)',
            '  | |--Port A: (50050cc10ac8deff:10)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:05)(0026)',
            '  | |--Port A: (50050cc10ac8deff:11)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:04)(0026)',
            '  | |--Port B: (50050cc10ac8deff:04)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:04)(0025)',
            '  | |--Port B: (50050cc10ac8deff:05)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:05)(0025)',
            '  | |--Port B: (50050cc10ac8deff:06)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:06)(0025)',
            '  | |--Port B: (50050cc10ac8deff:07)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:07)(0025)',
            '  | |--Port C: (50050cc10ac8deff:00)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:03)(0001)',
            '  | |--Port C: (50050cc10ac8deff:01)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:02)(0001)',
            '  | |--Port C: (50050cc10ac8deff:02)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:01)(0001)',
            '  | \\--Port C: (50050cc10ac8deff:03)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:00)(0001)',
            '  |-SH00, IOM 0, Outgoing port: A',
            '  | \\- Unknown device (500605b005a728c4:07)(0026)',
            '  \\-SH00, IOM 0, Outgoing port: B',
            '    |-SH02, IOM 0, Incoming port: B',
            '    | |-Slot 00: (50050cc10f10833f:35)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdd91:00)(0057), (00000, 00000, 00000, 00000), (sdbv, sg75)',
            '    | |-Slot 01: (50050cc10f10833f:34)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf39:00)(0056), (00000, 00000, 00000, 00000), (sdbu, sg74)',
            '    | |-Slot 02: (50050cc10f10833f:33)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2e9:00)(0055), (00000, 00000, 00000, 00000), (sdbt, sg73)',
            '    | |-Slot 03: (50050cc10f10833f:32)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2f1:00)(0054), (00000, 00000, 00000, 00000), (sdbs, sg72)',
            '    | |-Slot 04: (50050cc10f10833f:31)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf35:00)(0053), (00000, 00000, 00000, 00000), (sdbr, sg71)',
            '    | |-Slot 05: (50050cc10f10833f:30)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdded:00)(0052), (00000, 00000, 00000, 00000), (sdbq, sg70)',
            '    | |-Slot 06: (50050cc10f10833f:29)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdced:00)(0051), (00000, 00000, 00000, 00000), (sdbp, sg69)',
            '    | |-Slot 07: (50050cc10f10833f:28)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdb9d:00)(0050), (00000, 00000, 00000, 00000), (sdbo, sg68)',
            '    | |-Slot 08: (50050cc10f10833f:27)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e3a5:00)(004f), (00000, 00000, 00000, 00000), (sdbn, sg67)',
            '    | |-Slot 09: (50050cc10f10833f:26)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e461:00)(004e), (00000, 00000, 00000, 00000), (sdbm, sg66)',
            '    | |-Slot 10: (50050cc10f10833f:25)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf55:00)(004d), (00000, 00000, 00000, 00000), (sdbl, sg65)',
            '    | |-Slot 11: (50050cc10f10833f:24)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf05:00)(004c), (00000, 00000, 00000, 00000), (sdbk, sg64)',
            '    | |-Slot 12: (50050cc10f10833f:23)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfc95d:00)(004b), (00000, 00000, 00000, 00000), (sdbj, sg63)',
            '    | |-Slot 13: (50050cc10f10833f:22)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe129:00)(004a), (00000, 00000, 00000, 00000), (sdbi, sg62)',
            '    | |-Slot 14: (50050cc10f10833f:21)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe09d:00)(0049), (00000, 00000, 00000, 00000), (sdbh, sg61)',
            '    | |-Slot 15: (50050cc10f10833f:20)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde75:00)(0048), (00000, 00000, 00000, 00000), (sdbg, sg60)',
            '    | |-Slot 16: (50050cc10f10833f:19)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe309:00)(0047), (00000, 00000, 00000, 00000), (sdbf, sg59)',
            '    | |-Slot 17: (50050cc10f10833f:18)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe011:00)(0046), (00000, 00000, 00000, 00000), (sdbe, sg58)',
            '    | |-Slot 18: (50050cc10f10833f:17)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde35:00)(0045), (00000, 00000, 00000, 00000), (sdbd, sg57)',
            '    | |-Slot 19: (50050cc10f10833f:16)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfd029:00)(0044), (00000, 00000, 00000, 00001), (sdbc, sg56)',
            '    | |-Slot 20: (50050cc10f10833f:15)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdeb1:00)(0043), (00000, 00000, 00000, 00000), (sdbb, sg55)',
            '    | |-Slot 21: (50050cc10f10833f:14)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe119:00)(0042), (00000, 00000, 00000, 00000), (sdba, sg54)',
            '    | |-Slot 22: (50050cc10f10833f:13)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0a5:00)(0041), (00000, 00000, 00000, 00000), (sdaz, sg53)',
            '    | |-Slot 23: (50050cc10f10833f:12)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0e1:00)(0040), (00000, 00000, 00000, 00000), (sday, sg52)',
            '    | |-----SEP: (50050cc10f10833f:36)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833e:36)(0058), (-, sg76)',
            '    | |--Port A: (50050cc10f10833f:08)(0025), Link down',
            '    | |--Port A: (50050cc10f10833f:09)(0025), Link down',
            '    | |--Port A: (50050cc10f10833f:10)(0025), Link down',
            '    | |--Port A: (50050cc10f10833f:11)(0025), Link down',
            '    | |--Port B: (50050cc10f10833f:04)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:04)(0024)',
            '    | |--Port B: (50050cc10f10833f:05)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:05)(0024)',
            '    | |--Port B: (50050cc10f10833f:06)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:06)(0024)',
            '    | |--Port B: (50050cc10f10833f:07)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:07)(0024)',
            '    | |--Port C: (50050cc10f10833f:00)(0025), Link down',
            '    | |--Port C: (50050cc10f10833f:01)(0025), Link down',
            '    | |--Port C: (50050cc10f10833f:02)(0025), Link down',
            '    | \\--Port C: (50050cc10f10833f:03)(0025), Link down',
            '    |-SH02, IOM 0, Outgoing port: A, Link Down',
            '    \\-SH02, IOM 0, Outgoing port: C, Link Down',
            '',
            '',
            'Slot summary:',
            '3.0] <---> [C:1.1:A] <---> [Unknown device 500605b005a728c0',
            '                  \\B*',
            '',
            '3.1] <---> [C:0.0:A] <---> [Unknown device 500605b005a728c4',
            '                  \\B] <---> [B:2.0:A*',
            '                                  \\C*',
            '',
            '',
            'Error information:',
            'SH01, IOM 0, Port C: Attached device is unknown.',
            'SH00, IOM 1, Port C: Attached device is unknown.',
            'SH01, IOM 1, Port A: Attached device is unknown.',
            'SH00, IOM 0, Port A: Attached device is unknown.',
            '',
            '',
        ]
        result = self.sasview.diag_topology_all
        self.assertEqual(result, expected)

    def test_diag_topology_all_dict(self):
        """Test the diag_topology_all_dict property."""
        expected = defaultdict(list, {
            'Command line': '/opt/Purity/bin/sas_view.py diag topology all',
            'Error information': [
                '',
                'SH01, IOM 0, Port C: Attached device is unknown.',
                'SH00, IOM 1, Port C: Attached device is unknown.',
                'SH01, IOM 1, Port A: Attached device is unknown.',
                'SH00, IOM 0, Port A: Attached device is unknown.',
                '',
                ''
            ],
            'Revision': '45446 gamma',
            'Slot listing': [
                '',
                'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly       scsih PCI           lsiutil name   model',
                '----- ----- ---------- ------------ ------------ ------------ -------------- ----- ------------- ------- ----- --------',
                '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G       8 0000:44:00.0  0000002 ioc1  SAS2308',
                '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G       7 0000:43:00.0  0000001 ioc0  SAS2308',
                ''
            ],
            'Slot summary': [
                '',
                '2.0] <---> [A:1.0:B*',
                '                  \\C] <---> [Unknown device 500605b005a72940',
                '',
                '2.1] <---> [A:0.1:B] <---> [B:2.1:A*',
                '                  |               \\C*',
                '                  \\C] <---> [Unknown device 500605b005a72944',
                '',
                '',
                '',
                '3.0] <---> [C:1.1:A] <---> [Unknown device 500605b005a728c0',
                '                  \\B*',
                '',
                '3.1] <---> [C:0.0:A] <---> [Unknown device 500605b005a728c4',
                '                  \\B] <---> [B:2.0:A*',
                '                                  \\C*',
                '',
                ''
            ],
            'Topology information for slot 2': [
                '',
                '---------------------------------',
                'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly       scsih PCI           lsiutil name   model',
                '----- ----- ---------- ------------ ------------ ------------ -------------- ----- ------------- ------- ----- --------',
                '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G       8 0000:44:00.0  0000002 ioc1  SAS2308',
                '',
                'Detailed topology: {PHY Name: (SAS address:PHY no)(dvhd), (invalid dwords, running disparity, loss of dword sync, phy reset problem)}',
                'PCI Slot 2',
                '|--Port 0',
                '| | |-Link  0: (500605b005a6fbd4:04)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:11)(0009)',
                '| | |-Link  1: (500605b005a6fbd4:05)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:10)(0009)',
                '| | |-Link  2: (500605b005a6fbd4:06)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:09)(0009)',
                '| | \\-Link  3: (500605b005a6fbd4:07)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43f:08)(0009)',
                '| |-SH01, IOM 0, Incoming port: A',
                '| | |-Slot 00: (50050cc117fab43f:35)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c6d2:00)(0022), (24935, 24935, 00001, 00001), (sdct, sg100)',
                '| | |-Slot 01: (50050cc117fab43f:34)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5658d:00)(0021), (00000, 00000, 00000, 00000), (sdcs, sg99)',
                '| | |-Slot 02: (50050cc117fab43f:33)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f38fa9:00)(0020), (00000, 00000, 00000, 00000), (sdcr, sg98)',
                '| | |-Slot 03: (50050cc117fab43f:32)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53ed5:00)(001f), (00000, 00000, 00000, 00000), (sdcq, sg97)',
                '| | |-Slot 04: (50050cc117fab43f:31)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5678d:00)(001e), (00000, 00000, 00000, 00000), (sdcp, sg96)',
                '| | |-Slot 05: (50050cc117fab43f:30)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e9:00)(001d), (00000, 00000, 00000, 00000), (sdco, sg95)',
                '| | |-Slot 06: (50050cc117fab43f:29)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a75:00)(001c), (00000, 00000, 00000, 00000), (sdcn, sg94)',
                '| | |-Slot 07: (50050cc117fab43f:28)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5659d:00)(001b), (00000, 00000, 00000, 00000), (sdcm, sg93)',
                '| | |-Slot 08: (50050cc117fab43f:27)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56561:00)(001a), (00000, 00000, 00000, 00000), (sdcl, sg92)',
                '| | |-Slot 09: (50050cc117fab43f:26)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54ab5:00)(0019), (00000, 00000, 00000, 00000), (sdck, sg91)',
                '| | |-Slot 10: (50050cc117fab43f:25)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5653d:00)(0018), (00000, 00000, 00000, 00000), (sdcj, sg90)',
                '| | |-Slot 11: (50050cc117fab43f:24)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56555:00)(0017), (00000, 00000, 00000, 00001), (sdci, sg89)',
                '| | |-Slot 12: (50050cc117fab43f:23)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f1:00)(0016), (00000, 00000, 00000, 00000), (sdch, sg88)',
                '| | |-Slot 13: (50050cc117fab43f:22)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f565dd:00)(0015), (00000, 00000, 00000, 00000), (sdcg, sg87)',
                '| | |-Slot 14: (50050cc117fab43f:21)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e5:00)(0014), (00000, 00000, 00000, 00000), (sdcf, sg86)',
                '| | |-Slot 15: (50050cc117fab43f:20)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e1:00)(0013), (00000, 00000, 00000, 00000), (sdce, sg85)',
                '| | |-Slot 16: (50050cc117fab43f:19)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f563ed:00)(0012), (00000, 00000, 00000, 00000), (sdcd, sg84)',
                '| | |-Slot 17: (50050cc117fab43f:18)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56575:00)(0011), (00000, 00000, 00000, 00001), (sdcc, sg83)',
                '| | |-Slot 18: (50050cc117fab43f:17)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f5:00)(0010), (00000, 00000, 00000, 00000), (sdcb, sg82)',
                '| | |-Slot 19: (50050cc117fab43f:16)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56801:00)(000f), (00000, 00000, 00000, 00000), (sdca, sg81)',
                '| | |-Slot 20: (50050cc117fab43f:15)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54c19:00)(000e), (00000, 00000, 00000, 00000), (sdbz, sg80)',
                '| | |-Slot 21: (50050cc117fab43f:14)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53e79:00)(000d), (00000, 00000, 00000, 00000), (sdby, sg79)',
                '| | |-Slot 22: (50050cc117fab43f:13)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a7d:00)(000c), (00000, 00000, 00000, 00000), (sdbx, sg78)',
                '| | |-Slot 23: (50050cc117fab43f:12)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c762:00)(000b), (24942, 24942, 00001, 00001), (sdbw, sg77)',
                '| | |-----SEP: (50050cc117fab43f:36)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab43e:36)(0023), (-, sg101)',
                '| | |--Port A: (50050cc117fab43f:08)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:07)(0005)',
                '| | |--Port A: (50050cc117fab43f:09)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:06)(0005)',
                '| | |--Port A: (50050cc117fab43f:10)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:05)(0005)',
                '| | |--Port A: (50050cc117fab43f:11)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd4:04)(0005)',
                '| | |--Port B: (50050cc117fab43f:04)(0009), Link down',
                '| | |--Port B: (50050cc117fab43f:05)(0009), Link down',
                '| | |--Port B: (50050cc117fab43f:06)(0009), Link down',
                '| | |--Port B: (50050cc117fab43f:07)(0009), Link down',
                '| | |--Port C: (50050cc117fab43f:00)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:03)(000a)',
                '| | |--Port C: (50050cc117fab43f:01)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:02)(000a)',
                '| | |--Port C: (50050cc117fab43f:02)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:01)(000a)',
                '| | \\--Port C: (50050cc117fab43f:03)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72940:00)(000a)',
                '| |-SH01, IOM 0, Outgoing port: B, Link Down',
                '| \\-SH01, IOM 0, Outgoing port: C',
                '|   \\- Unknown device (500605b005a72940:03)(000a)',
                '|',
                '\\--Port 1',
                '  | |-Link  0: (500605b005a6fbd0:00)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:11)(0024)',
                '  | |-Link  1: (500605b005a6fbd0:01)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:10)(0024)',
                '  | |-Link  2: (500605b005a6fbd0:02)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:09)(0024)',
                '  | \\-Link  3: (500605b005a6fbd0:03)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:08)(0024)',
                '  |-SH00, IOM 1, Incoming port: A',
                '  | |-Slot 00: (50050cc10ac8e7bf:12)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5000a72b30086935:01)(0027), (00000, 00000, 00003, 00000), (sdcu, sg102)',
                '  | |-Slot 01: (50050cc10ac8e7bf:13)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbb2:01)(0028), (00000, 00000, 00000, 00000), (sdcv, sg103)',
                '  | |-Slot 02: (50050cc10ac8e7bf:23)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1442:01)(0032), (00000, 00000, 00000, 00000), (sddf, sg113)',
                '  | |-Slot 03: (50050cc10ac8e7bf:21)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1176:01)(0030), (00000, 00000, 00000, 00000), (sddd, sg111)',
                '  | |-Slot 04: (50050cc10ac8e7bf:20)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1456:01)(002f), (00000, 00000, 00000, 00000), (sddc, sg110)',
                '  | |-Slot 05: (50050cc10ac8e7bf:19)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af6ca:01)(002e), (00000, 00000, 00000, 00000), (sddb, sg109)',
                '  | |-Slot 06: (50050cc10ac8e7bf:18)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0eb2:01)(002d), (00000, 00000, 00000, 00000), (sdda, sg108)',
                '  | |-Slot 07: (50050cc10ac8e7bf:16)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa26:01)(002b), (00000, 00000, 00000, 00000), (sdcy, sg106)',
                '  | |-Slot 08: (50050cc10ac8e7bf:15)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa66:01)(002a), (00000, 00000, 00000, 00000), (sdcx, sg105)',
                '  | |-Slot 09: (50050cc10ac8e7bf:14)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0e9a:01)(0029), (00000, 00000, 00000, 00000), (sdcw, sg104)',
                '  | |-Slot 10: (50050cc10ac8e7bf:17)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff7a:01)(002c), (00000, 00000, 00000, 00000), (sdcz, sg107)',
                '  | |-Slot 11: (50050cc10ac8e7bf:22)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e159a:01)(0031), (00000, 00000, 00000, 00000), (sdde, sg112)',
                '  | |-Slot 12: (50050cc10ac8e7bf:28)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1512:01)(0037), (00000, 00000, 00000, 00000), (sddk, sg118)',
                '  | |-Slot 13: (50050cc10ac8e7bf:27)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff8a:01)(0036), (00000, 00000, 00000, 00000), (sddj, sg117)',
                '  | |-Slot 14: (50050cc10ac8e7bf:26)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa62:01)(0035), (00000, 00000, 00000, 00000), (sddi, sg116)',
                '  | |-Slot 15: (50050cc10ac8e7bf:29)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e14de:01)(0038), (00000, 00000, 00000, 00000), (sddl, sg119)',
                '  | |-Slot 16: (50050cc10ac8e7bf:32)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e15a6:01)(003b), (00000, 00000, 00000, 00000), (sddo, sg122)',
                '  | |-Slot 17: (50050cc10ac8e7bf:31)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afcca:01)(003a), (00000, 00000, 00000, 00000), (sddn, sg121)',
                '  | |-Slot 18: (50050cc10ac8e7bf:30)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af77e:01)(0039), (00000, 00000, 00000, 00000), (sddm, sg120)',
                '  | |-Slot 19: (50050cc10ac8e7bf:25)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af7e2:01)(0034), (00000, 00000, 00000, 00000), (sddh, sg115)',
                '  | |-Slot 20: (50050cc10ac8e7bf:24)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbe6:01)(0033), (00000, 00000, 00000, 00000), (sddg, sg114)',
                '  | |-Slot 21: (50050cc10ac8e7bf:33)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afb92:01)(003c), (00000, 00000, 00000, 00000), (sddp, sg123)',
                '  | |-Slot 22: (50050cc10ac8e7bf:34)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0ef2:01)(003d), (00000, 00000, 00000, 00000), (sddq, sg124)',
                '  | |-Slot 23: (50050cc10ac8e7bf:35)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5002538454114303:01)(003e), (00000, 00000, 00000, 00001), (sddr, sg125)',
                '  | |-----SEP: (50050cc10ac8e7bf:36)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7be:36)(003f), (-, sg126)',
                '  | |--Port A: (50050cc10ac8e7bf:08)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:03)(0001)',
                '  | |--Port A: (50050cc10ac8e7bf:09)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:02)(0001)',
                '  | |--Port A: (50050cc10ac8e7bf:10)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:01)(0001)',
                '  | |--Port A: (50050cc10ac8e7bf:11)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a6fbd0:00)(0001)',
                '  | |--Port B: (50050cc10ac8e7bf:04)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:04)(0026)',
                '  | |--Port B: (50050cc10ac8e7bf:05)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:05)(0026)',
                '  | |--Port B: (50050cc10ac8e7bf:06)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:06)(0026)',
                '  | |--Port B: (50050cc10ac8e7bf:07)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813f:07)(0026)',
                '  | |--Port C: (50050cc10ac8e7bf:00)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:07)(0025)',
                '  | |--Port C: (50050cc10ac8e7bf:01)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:06)(0025)',
                '  | |--Port C: (50050cc10ac8e7bf:02)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:05)(0025)',
                '  | \\--Port C: (50050cc10ac8e7bf:03)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a72944:04)(0025)',
                '  |-SH00, IOM 1, Outgoing port: B',
                '  | |-SH02, IOM 1, Incoming port: B',
                '  | | |-Slot 00: (50050cc10f10813f:12)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdd92:01)(0040), (00000, 00000, 00000, 00000), (sdds, sg127)',
                '  | | |-Slot 01: (50050cc10f10813f:13)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf3a:01)(0041), (00000, 00000, 00000, 00000), (sddt, sg128)',
                '  | | |-Slot 02: (50050cc10f10813f:23)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2ea:01)(004b), (00000, 00000, 00000, 00000), (sded, sg138)',
                '  | | |-Slot 03: (50050cc10f10813f:21)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2f2:01)(0049), (00000, 00000, 00000, 00000), (sdeb, sg136)',
                '  | | |-Slot 04: (50050cc10f10813f:20)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf36:01)(0048), (00000, 00000, 00000, 00000), (sdea, sg135)',
                '  | | |-Slot 05: (50050cc10f10813f:19)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfddee:01)(0047), (00000, 00000, 00000, 00000), (sddz, sg134)',
                '  | | |-Slot 06: (50050cc10f10813f:18)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdcee:01)(0046), (00000, 00000, 00000, 00000), (sddy, sg133)',
                '  | | |-Slot 07: (50050cc10f10813f:16)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdb9e:01)(0044), (00000, 00000, 00000, 00000), (sddw, sg131)',
                '  | | |-Slot 08: (50050cc10f10813f:15)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e3a6:01)(0043), (00000, 00000, 00000, 00000), (sddv, sg130)',
                '  | | |-Slot 09: (50050cc10f10813f:14)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e462:01)(0042), (00000, 00000, 00000, 00000), (sddu, sg129)',
                '  | | |-Slot 10: (50050cc10f10813f:17)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf56:01)(0045), (00000, 00000, 00000, 00000), (sddx, sg132)',
                '  | | |-Slot 11: (50050cc10f10813f:22)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf06:01)(004a), (00000, 00000, 00000, 00000), (sdec, sg137)',
                '  | | |-Slot 12: (50050cc10f10813f:28)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfc95e:01)(0050), (00000, 00000, 00000, 00000), (sdei, sg143)',
                '  | | |-Slot 13: (50050cc10f10813f:27)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe12a:01)(004f), (00000, 00000, 00000, 00000), (sdeh, sg142)',
                '  | | |-Slot 14: (50050cc10f10813f:26)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe09e:01)(004e), (00000, 00000, 00000, 00000), (sdeg, sg141)',
                '  | | |-Slot 15: (50050cc10f10813f:29)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde76:01)(0051), (00000, 00000, 00000, 00000), (sdej, sg144)',
                '  | | |-Slot 16: (50050cc10f10813f:32)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe30a:01)(0054), (00000, 00000, 00000, 00000), (sdem, sg147)',
                '  | | |-Slot 17: (50050cc10f10813f:31)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe012:01)(0053), (00000, 00000, 00000, 00000), (sdel, sg146)',
                '  | | |-Slot 18: (50050cc10f10813f:30)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde36:01)(0052), (00000, 00000, 00000, 00000), (sdek, sg145)',
                '  | | |-Slot 19: (50050cc10f10813f:25)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfd02a:01)(004d), (00000, 00000, 00000, 00001), (sdef, sg140)',
                '  | | |-Slot 20: (50050cc10f10813f:24)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdeb2:01)(004c), (00000, 00000, 00000, 00000), (sdee, sg139)',
                '  | | |-Slot 21: (50050cc10f10813f:33)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe11a:01)(0055), (00000, 00000, 00000, 00000), (sden, sg148)',
                '  | | |-Slot 22: (50050cc10f10813f:34)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0a6:01)(0056), (00000, 00000, 00000, 00000), (sdeo, sg149)',
                '  | | |-Slot 23: (50050cc10f10813f:35)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0e2:01)(0057), (00000, 00000, 00000, 00000), (sdep, sg150)',
                '  | | |-----SEP: (50050cc10f10813f:36)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10813e:36)(0058), (-, sg151)',
                '  | | |--Port A: (50050cc10f10813f:08)(0026), Link down',
                '  | | |--Port A: (50050cc10f10813f:09)(0026), Link down',
                '  | | |--Port A: (50050cc10f10813f:10)(0026), Link down',
                '  | | |--Port A: (50050cc10f10813f:11)(0026), Link down',
                '  | | |--Port B: (50050cc10f10813f:04)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:04)(0024)',
                '  | | |--Port B: (50050cc10f10813f:05)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:05)(0024)',
                '  | | |--Port B: (50050cc10f10813f:06)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:06)(0024)',
                '  | | |--Port B: (50050cc10f10813f:07)(0026), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8e7bf:07)(0024)',
                '  | | |--Port C: (50050cc10f10813f:00)(0026), Link down',
                '  | | |--Port C: (50050cc10f10813f:01)(0026), Link down',
                '  | | |--Port C: (50050cc10f10813f:02)(0026), Link down',
                '  | | \\--Port C: (50050cc10f10813f:03)(0026), Link down',
                '  | |-SH02, IOM 1, Outgoing port: A, Link Down',
                '  | \\-SH02, IOM 1, Outgoing port: C, Link Down',
                '  \\-SH00, IOM 1, Outgoing port: C',
                '    \\- Unknown device (500605b005a72944:07)(0025)',
                '',
                ''
            ],
            'Topology information for slot 3': [
                '',
                '---------------------------------',
                'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly       scsih PCI           lsiutil name   model',
                '----- ----- ---------- ------------ ------------ ------------ -------------- ----- ------------- ------- ----- --------',
                '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G       7 0000:43:00.0  0000001 ioc0  SAS2308',
                '',
                'Detailed topology: {PHY Name: (SAS address:PHY no)(dvhd), (invalid dwords, running disparity, loss of dword sync, phy reset problem)}',
                'PCI Slot 3',
                '|--Port 0',
                '| | |-Link  0: (500605b005a728d4:04)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:03)(0009)',
                '| | |-Link  1: (500605b005a728d4:05)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:02)(0009)',
                '| | |-Link  2: (500605b005a728d4:06)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:01)(0009)',
                '| | \\-Link  3: (500605b005a728d4:07)(0005), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0ff:00)(0009)',
                '| |-SH01, IOM 1, Incoming port: C',
                '| | |-Slot 00: (50050cc117fab0ff:12)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c6d3:01)(000b), (24425, 24681, 00001, 00001), (sdc, sg2)',
                '| | |-Slot 01: (50050cc117fab0ff:13)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5658e:01)(000c), (00000, 00000, 00000, 00000), (sdd, sg3)',
                '| | |-Slot 02: (50050cc117fab0ff:23)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f38faa:01)(0016), (00000, 00000, 00000, 00000), (sdn, sg13)',
                '| | |-Slot 03: (50050cc117fab0ff:21)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53ed6:01)(0014), (00000, 00000, 00000, 00000), (sdl, sg11)',
                '| | |-Slot 04: (50050cc117fab0ff:20)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5678e:01)(0013), (00000, 00000, 00000, 00000), (sdk, sg10)',
                '| | |-Slot 05: (50050cc117fab0ff:19)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567ea:01)(0012), (00000, 00000, 00000, 00000), (sdj, sg9)',
                '| | |-Slot 06: (50050cc117fab0ff:18)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a76:01)(0011), (00000, 00000, 00000, 00000), (sdi, sg8)',
                '| | |-Slot 07: (50050cc117fab0ff:16)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5659e:01)(000f), (00000, 00000, 00000, 00000), (sdg, sg6)',
                '| | |-Slot 08: (50050cc117fab0ff:15)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56562:01)(000e), (00000, 00000, 00000, 00000), (sdf, sg5)',
                '| | |-Slot 09: (50050cc117fab0ff:14)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54ab6:01)(000d), (00000, 00000, 00000, 00000), (sde, sg4)',
                '| | |-Slot 10: (50050cc117fab0ff:17)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f5653e:01)(0010), (00000, 00000, 00000, 00000), (sdh, sg7)',
                '| | |-Slot 11: (50050cc117fab0ff:22)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56556:01)(0015), (00000, 00000, 00000, 00001), (sdm, sg12)',
                '| | |-Slot 12: (50050cc117fab0ff:28)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f2:01)(001b), (00000, 00000, 00000, 00000), (sds, sg18)',
                '| | |-Slot 13: (50050cc117fab0ff:27)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f565de:01)(001a), (00000, 00000, 00000, 00000), (sdr, sg17)',
                '| | |-Slot 14: (50050cc117fab0ff:26)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e6:01)(0019), (00000, 00000, 00000, 00000), (sdq, sg16)',
                '| | |-Slot 15: (50050cc117fab0ff:29)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567e2:01)(001c), (00000, 00000, 00000, 00000), (sdt, sg19)',
                '| | |-Slot 16: (50050cc117fab0ff:32)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f563ee:01)(001f), (00000, 00000, 00000, 00000), (sdw, sg22)',
                '| | |-Slot 17: (50050cc117fab0ff:31)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56576:01)(001e), (00000, 00000, 00000, 00001), (sdv, sg21)',
                '| | |-Slot 18: (50050cc117fab0ff:30)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f567f6:01)(001d), (00000, 00000, 00000, 00000), (sdu, sg20)',
                '| | |-Slot 19: (50050cc117fab0ff:25)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f56802:01)(0018), (00000, 00000, 00000, 00000), (sdp, sg15)',
                '| | |-Slot 20: (50050cc117fab0ff:24)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54c1a:01)(0017), (00000, 00000, 00000, 00000), (sdo, sg14)',
                '| | |-Slot 21: (50050cc117fab0ff:33)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f53e7a:01)(0020), (00000, 00000, 00000, 00000), (sdx, sg23)',
                '| | |-Slot 22: (50050cc117fab0ff:34)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00f54a7e:01)(0021), (00000, 00000, 00000, 00000), (sdy, sg24)',
                '| | |-Slot 23: (50050cc117fab0ff:35)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500253845461c763:01)(0022), (24427, 24426, 00001, 00001), (sdz, sg25)',
                '| | |-----SEP: (50050cc117fab0ff:36)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc117fab0fe:36)(0023), (-, sg26)',
                '| | |--Port A: (50050cc117fab0ff:08)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:03)(000a)',
                '| | |--Port A: (50050cc117fab0ff:09)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:02)(000a)',
                '| | |--Port A: (50050cc117fab0ff:10)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:01)(000a)',
                '| | |--Port A: (50050cc117fab0ff:11)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c0:00)(000a)',
                '| | |--Port B: (50050cc117fab0ff:04)(0009), Link down',
                '| | |--Port B: (50050cc117fab0ff:05)(0009), Link down',
                '| | |--Port B: (50050cc117fab0ff:06)(0009), Link down',
                '| | |--Port B: (50050cc117fab0ff:07)(0009), Link down',
                '| | |--Port C: (50050cc117fab0ff:00)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:07)(0005)',
                '| | |--Port C: (50050cc117fab0ff:01)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:06)(0005)',
                '| | |--Port C: (50050cc117fab0ff:02)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:05)(0005)',
                '| | \\--Port C: (50050cc117fab0ff:03)(0009), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d4:04)(0005)',
                '| |-SH01, IOM 1, Outgoing port: A',
                '| | \\- Unknown device (500605b005a728c0:03)(000a)',
                '| \\-SH01, IOM 1, Outgoing port: B, Link Down',
                '|',
                '\\--Port 1',
                '  | |-Link  0: (500605b005a728d0:00)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:03)(0024)',
                '  | |-Link  1: (500605b005a728d0:01)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:02)(0024)',
                '  | |-Link  2: (500605b005a728d0:02)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:01)(0024)',
                '  | \\-Link  3: (500605b005a728d0:03)(0001), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:00)(0024)',
                '  |-SH00, IOM 0, Incoming port: C',
                '  | |-Slot 00: (50050cc10ac8deff:35)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5000a72a30086935:00)(003e), (00000, 00000, 00003, 00000), (sdax, sg50)',
                '  | |-Slot 01: (50050cc10ac8deff:34)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbb1:00)(003d), (00000, 00000, 00000, 00000), (sdaw, sg49)',
                '  | |-Slot 02: (50050cc10ac8deff:33)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1441:00)(003c), (00000, 00000, 00000, 00000), (sdav, sg48)',
                '  | |-Slot 03: (50050cc10ac8deff:32)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1175:00)(003b), (00000, 00000, 00000, 00000), (sdau, sg47)',
                '  | |-Slot 04: (50050cc10ac8deff:31)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1455:00)(003a), (00000, 00000, 00000, 00000), (sdat, sg46)',
                '  | |-Slot 05: (50050cc10ac8deff:30)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af6c9:00)(0039), (00000, 00000, 00000, 00000), (sdas, sg45)',
                '  | |-Slot 06: (50050cc10ac8deff:29)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0eb1:00)(0038), (00000, 00000, 00000, 00000), (sdar, sg44)',
                '  | |-Slot 07: (50050cc10ac8deff:28)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa25:00)(0037), (00000, 00000, 00000, 00000), (sdaq, sg43)',
                '  | |-Slot 08: (50050cc10ac8deff:27)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa65:00)(0036), (00000, 00000, 00000, 00000), (sdap, sg42)',
                '  | |-Slot 09: (50050cc10ac8deff:26)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0e99:00)(0035), (00000, 00000, 00000, 00000), (sdao, sg41)',
                '  | |-Slot 10: (50050cc10ac8deff:25)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff79:00)(0034), (00000, 00000, 00000, 00000), (sdan, sg40)',
                '  | |-Slot 11: (50050cc10ac8deff:24)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1599:00)(0033), (00000, 00000, 00000, 00000), (sdam, sg39)',
                '  | |-Slot 12: (50050cc10ac8deff:23)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e1511:00)(0032), (00000, 00000, 00000, 00000), (sdal, sg38)',
                '  | |-Slot 13: (50050cc10ac8deff:22)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004aff89:00)(0031), (00000, 00000, 00000, 00000), (sdak, sg37)',
                '  | |-Slot 14: (50050cc10ac8deff:21)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afa61:00)(0030), (00000, 00000, 00000, 00000), (sdaj, sg36)',
                '  | |-Slot 15: (50050cc10ac8deff:20)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e14dd:00)(002f), (00000, 00000, 00000, 00000), (sdai, sg35)',
                '  | |-Slot 16: (50050cc10ac8deff:19)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e15a5:00)(002e), (00000, 00000, 00000, 00000), (sdah, sg34)',
                '  | |-Slot 17: (50050cc10ac8deff:18)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afcc9:00)(002d), (00000, 00000, 00000, 00000), (sdag, sg33)',
                '  | |-Slot 18: (50050cc10ac8deff:17)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af77d:00)(002c), (00000, 00000, 00000, 00000), (sdaf, sg32)',
                '  | |-Slot 19: (50050cc10ac8deff:16)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004af7e1:00)(002b), (00000, 00000, 00000, 00000), (sdae, sg31)',
                '  | |-Slot 20: (50050cc10ac8deff:15)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afbe5:00)(002a), (00000, 00000, 00000, 00000), (sdad, sg30)',
                '  | |-Slot 21: (50050cc10ac8deff:14)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba004afb91:00)(0029), (00000, 00000, 00000, 00000), (sdac, sg29)',
                '  | |-Slot 22: (50050cc10ac8deff:13)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba002e0ef1:00)(0028), (00000, 00000, 00000, 00000), (sdab, sg28)',
                '  | |-Slot 23: (50050cc10ac8deff:12)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (5002538454114302:00)(0027), (00000, 00000, 00000, 00001), (sdaa, sg27)',
                '  | |-----SEP: (50050cc10ac8deff:36)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8defe:36)(003f), (-, sg51)',
                '  | |--Port A: (50050cc10ac8deff:08)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:07)(0026)',
                '  | |--Port A: (50050cc10ac8deff:09)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:06)(0026)',
                '  | |--Port A: (50050cc10ac8deff:10)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:05)(0026)',
                '  | |--Port A: (50050cc10ac8deff:11)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728c4:04)(0026)',
                '  | |--Port B: (50050cc10ac8deff:04)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:04)(0025)',
                '  | |--Port B: (50050cc10ac8deff:05)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:05)(0025)',
                '  | |--Port B: (50050cc10ac8deff:06)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:06)(0025)',
                '  | |--Port B: (50050cc10ac8deff:07)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833f:07)(0025)',
                '  | |--Port C: (50050cc10ac8deff:00)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:03)(0001)',
                '  | |--Port C: (50050cc10ac8deff:01)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:02)(0001)',
                '  | |--Port C: (50050cc10ac8deff:02)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:01)(0001)',
                '  | \\--Port C: (50050cc10ac8deff:03)(0024), (00000, 00000, 00000, 00000) <- 6.0-> (500605b005a728d0:00)(0001)',
                '  |-SH00, IOM 0, Outgoing port: A',
                '  | \\- Unknown device (500605b005a728c4:07)(0026)',
                '  \\-SH00, IOM 0, Outgoing port: B',
                '    |-SH02, IOM 0, Incoming port: B',
                '    | |-Slot 00: (50050cc10f10833f:35)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdd91:00)(0057), (00000, 00000, 00000, 00000), (sdbv, sg75)',
                '    | |-Slot 01: (50050cc10f10833f:34)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf39:00)(0056), (00000, 00000, 00000, 00000), (sdbu, sg74)',
                '    | |-Slot 02: (50050cc10f10833f:33)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2e9:00)(0055), (00000, 00000, 00000, 00000), (sdbt, sg73)',
                '    | |-Slot 03: (50050cc10f10833f:32)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe2f1:00)(0054), (00000, 00000, 00000, 00000), (sdbs, sg72)',
                '    | |-Slot 04: (50050cc10f10833f:31)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf35:00)(0053), (00000, 00000, 00000, 00000), (sdbr, sg71)',
                '    | |-Slot 05: (50050cc10f10833f:30)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdded:00)(0052), (00000, 00000, 00000, 00000), (sdbq, sg70)',
                '    | |-Slot 06: (50050cc10f10833f:29)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdced:00)(0051), (00000, 00000, 00000, 00000), (sdbp, sg69)',
                '    | |-Slot 07: (50050cc10f10833f:28)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdb9d:00)(0050), (00000, 00000, 00000, 00000), (sdbo, sg68)',
                '    | |-Slot 08: (50050cc10f10833f:27)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e3a5:00)(004f), (00000, 00000, 00000, 00000), (sdbn, sg67)',
                '    | |-Slot 09: (50050cc10f10833f:26)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00c8e461:00)(004e), (00000, 00000, 00000, 00000), (sdbm, sg66)',
                '    | |-Slot 10: (50050cc10f10833f:25)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf55:00)(004d), (00000, 00000, 00000, 00000), (sdbl, sg65)',
                '    | |-Slot 11: (50050cc10f10833f:24)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdf05:00)(004c), (00000, 00000, 00000, 00000), (sdbk, sg64)',
                '    | |-Slot 12: (50050cc10f10833f:23)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfc95d:00)(004b), (00000, 00000, 00000, 00000), (sdbj, sg63)',
                '    | |-Slot 13: (50050cc10f10833f:22)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe129:00)(004a), (00000, 00000, 00000, 00000), (sdbi, sg62)',
                '    | |-Slot 14: (50050cc10f10833f:21)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe09d:00)(0049), (00000, 00000, 00000, 00000), (sdbh, sg61)',
                '    | |-Slot 15: (50050cc10f10833f:20)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde75:00)(0048), (00000, 00000, 00000, 00000), (sdbg, sg60)',
                '    | |-Slot 16: (50050cc10f10833f:19)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe309:00)(0047), (00000, 00000, 00000, 00000), (sdbf, sg59)',
                '    | |-Slot 17: (50050cc10f10833f:18)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe011:00)(0046), (00000, 00000, 00000, 00000), (sdbe, sg58)',
                '    | |-Slot 18: (50050cc10f10833f:17)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfde35:00)(0045), (00000, 00000, 00000, 00000), (sdbd, sg57)',
                '    | |-Slot 19: (50050cc10f10833f:16)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfd029:00)(0044), (00000, 00000, 00000, 00001), (sdbc, sg56)',
                '    | |-Slot 20: (50050cc10f10833f:15)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfdeb1:00)(0043), (00000, 00000, 00000, 00000), (sdbb, sg55)',
                '    | |-Slot 21: (50050cc10f10833f:14)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe119:00)(0042), (00000, 00000, 00000, 00000), (sdba, sg54)',
                '    | |-Slot 22: (50050cc10f10833f:13)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0a5:00)(0041), (00000, 00000, 00000, 00000), (sdaz, sg53)',
                '    | |-Slot 23: (50050cc10f10833f:12)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (500605ba00cfe0e1:00)(0040), (00000, 00000, 00000, 00000), (sday, sg52)',
                '    | |-----SEP: (50050cc10f10833f:36)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10f10833e:36)(0058), (-, sg76)',
                '    | |--Port A: (50050cc10f10833f:08)(0025), Link down',
                '    | |--Port A: (50050cc10f10833f:09)(0025), Link down',
                '    | |--Port A: (50050cc10f10833f:10)(0025), Link down',
                '    | |--Port A: (50050cc10f10833f:11)(0025), Link down',
                '    | |--Port B: (50050cc10f10833f:04)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:04)(0024)',
                '    | |--Port B: (50050cc10f10833f:05)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:05)(0024)',
                '    | |--Port B: (50050cc10f10833f:06)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:06)(0024)',
                '    | |--Port B: (50050cc10f10833f:07)(0025), (00000, 00000, 00000, 00000) <- 6.0-> (50050cc10ac8deff:07)(0024)',
                '    | |--Port C: (50050cc10f10833f:00)(0025), Link down',
                '    | |--Port C: (50050cc10f10833f:01)(0025), Link down',
                '    | |--Port C: (50050cc10f10833f:02)(0025), Link down',
                '    | \\--Port C: (50050cc10f10833f:03)(0025), Link down',
                '    |-SH02, IOM 0, Outgoing port: A, Link Down',
                '    \\-SH02, IOM 0, Outgoing port: C, Link Down',
                '',
                ''
            ],
            'Start time': '',
            'End time': '',
            }
        )
        result = self.sasview.diag_topology_all_dict
        self.assertEqual(result, expected)

    def test_config(self):
        """Test the config property."""
        expected = [
            'Command line: /opt/Purity/bin/sas_view.py, config',
            'Revision: 45446',
            '',
            'Slot listing:',
            'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly',
            '----- ----- ---------- ------------ ------------ ------------ --------------',
            '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G',
            '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G',
            '',
            'Slot summary information:',
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '2.0] <---> [A:1.0:B*',
            '                  \\C] <---> [Unknown device 500605b005a72940',
            '',
            '2.1] <---> [A:0.1:B] <---> [B:2.1:A*',
            '                  |               \\C*',
            '                  \\C] <---> [Unknown device 500605b005a72944',
            '',
            '3.0] <---> [C:1.1:A] <---> [Unknown device 500605b005a728c0',
            '                  \\B*',
            '',
            '3.1] <---> [C:0.0:A] <---> [Unknown device 500605b005a728c4',
            '                  \\B] <---> [B:2.0:A*',
            '                                  \\C*',
            '',
            '',
            '',
            'Configuration status',
            '--------------------',
            'Configuration check started for FA-420 operating as CT1',
            'Error information:',
            'SH 0 IOM 1 port B: SAS IOM port is cabled to wrong IOM port on next enclosure.',
            'SH 0 IOM 0 port B: SAS IOM port is cabled to wrong IOM port on next enclosure.',
            '',
            '',
        ]
        result = self.sasview.config
        self.assertEqual(result, expected)

    def test_config_dict(self):
        """Test the config_dict property."""
        expected = defaultdict(list, {
            'Command line': '/opt/Purity/bin/sas_view.py config',
            'Configuration status': [
                '--------------------',
                'Configuration check started for FA-420 operating as CT1'
            ],
            'Error information': [
                '',
                'SH 0 IOM 1 port B: SAS IOM port is cabled to wrong IOM port on next enclosure.',
                'SH 0 IOM 0 port B: SAS IOM port is cabled to wrong IOM port on next enclosure.',
                '',
                ''
            ],
            'Revision': '45446',
            'Slot listing': [
                '',
                'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly',
                '----- ----- ---------- ------------ ------------ ------------ --------------',
                '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G',
                '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G',
                ''
            ],
            'Slot summary information': [
                '',
                's.p  <- ->  I:##.#:O  <- -> ...',
                '----       ----------       ---',
                '2.0] <---> [A:1.0:B*',
                '                  \\C] <---> [Unknown device 500605b005a72940',
                '',
                '2.1] <---> [A:0.1:B] <---> [B:2.1:A*',
                '                  |               \\C*',
                '                  \\C] <---> [Unknown device 500605b005a72944',
                '',
                '3.0] <---> [C:1.1:A] <---> [Unknown device 500605b005a728c0',
                '                  \\B*',
                '',
                '3.1] <---> [C:0.0:A] <---> [Unknown device 500605b005a728c4',
                '                  \\B] <---> [B:2.0:A*',
                '                                  \\C*',
                '',
                '',
                ''
            ],
            'Start time': '',
            'End time': '',
            }
        )
        result = self.sasview.config_dict
        self.assertEqual(result, expected)

    def test_reset_cnts_all(self):
        """Test the reset_cnts_all property."""
        expected = [
            'Command line: /opt/Purity/bin/sas_view.py, reset_cnts, all',
            'Revision: 45446',
            '',
            'Slot listing:',
            'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly',
            '----- ----- ---------- ------------ ------------ ------------ --------------',
            '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G',
            '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G',
            '',
            'Slot 2: PHY error counters have been reset.',
            'Slot 3: PHY error counters have been reset.',
            '',
            'End time: 2018-05-22 00:06:00',
            '',
        ]
        result = self.sasview.reset_cnts_all
        self.assertEqual(result, expected)

    def test_reset_cnts_all_dict(self):
        """Test the reset_cnts_all_dict property."""
        expected = defaultdict(list, {
                'Command line': '/opt/Purity/bin/sas_view.py reset_cnts all',
                'End time': '2018-05-22 00:06:00',
                'Revision': '45446',
                'Slot listing': [
                    '',
                    'Slot# Type  Vendor     Model        FW Rev       Tracer       Assembly',
                    '----- ----- ---------- ------------ ------------ ------------ --------------',
                    '    2 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24921316   H3-25427-02G',
                    '    3 SAS   LSI Logic  SAS9207-8e   15.00.00.00  SV24922480   H3-25427-02G',
                    '',
                ],
                'Slot 2': [' PHY error counters have been reset.'],
                'Slot 3': [' PHY error counters have been reset.', ''],
                'Start time': '',
            }
        )
        result = self.sasview.reset_cnts_all_dict
        self.assertEqual(result, expected)

    def test_get_sas_topology(self):
        """Test the get_sas_topology() method."""
        expected = defaultdict(defaultdict, {
            'SLOT 2': defaultdict(defaultdict, {
                'SAS1': defaultdict(dict, {
                    'pci_sas_addr': set(['500605b005a6fbd0']),
                    'pci_sas_out': set(['50050cc10ac8e7bf']),
                    'SH00': {
                        'A': set(['500605b005a6fbd0']),
                        'C': set(['500605b005a72944']),
                        'B': set(['50050cc10f10813f']),
                        'iom': 'IOM1',
                        'iom_sas_addr': set(['50050cc10ac8e7bf']),
                        'iom_port': 'A'
                    },
                    'SH02': {
                        'A': set([]),
                        'C': set([]),
                        'B': set(['50050cc10ac8e7bf']),
                        'iom': 'IOM1',
                        'iom_sas_addr': set(['50050cc10f10813f']),
                        'iom_port': 'B'
                    }
                }),
                'SAS0': defaultdict(dict, {
                    'pci_sas_addr': set(['500605b005a6fbd4']),
                    'pci_sas_out': set(['50050cc117fab43f']),
                    'SH01': {
                        'A': set(['500605b005a6fbd4']),
                        'C': set(['500605b005a72940']),
                        'B': set([]),
                        'iom': 'IOM0',
                        'iom_sas_addr': set(['50050cc117fab43f']),
                        'iom_port': 'A'
                    },
                })
            }),
            'SLOT 3': defaultdict(defaultdict, {
                'SAS1': defaultdict(dict, {
                    'pci_sas_addr': set(['500605b005a728d0']),
                    'pci_sas_out': set(['50050cc10ac8deff']),
                    'SH00': {
                        'A': set(['500605b005a728c4']),
                        'C': set(['500605b005a728d0']),
                        'B': set(['50050cc10f10833f']),
                        'iom': 'IOM0',
                        'iom_sas_addr': set(['50050cc10ac8deff']),
                        'iom_port': 'C'
                    },
                    'SH02': {
                        'A': set([]),
                        'C': set([]),
                        'B': set(['50050cc10ac8deff']),
                        'iom': 'IOM0',
                        'iom_sas_addr': set(['50050cc10f10833f']),
                        'iom_port': 'B'
                    }
                }),
                'SAS0': defaultdict(dict, {
                    'pci_sas_addr': set(['500605b005a728d4']),
                    'pci_sas_out': set(['50050cc117fab0ff']),
                    'SH01': {
                        'A': set(['500605b005a728c0']),
                        'C': set(['500605b005a728d4']),
                        'B': set([]),
                        'iom': 'IOM1',
                        'iom_sas_addr': set(['50050cc117fab0ff']),
                        'iom_port': 'C'
                    },
                })
            })
        })
        result = self.sasview.get_sas_topology()
        self.assertEqual(result, expected)


class TestSASCabling(unittest.TestCase):
    """Unit tests for SASCabling."""

    sas_file_path0 = test_utils.get_files_of_type('*/sasview_nycm70pure01-ct0')
    sas_file_path1 = test_utils.get_files_of_type('*/sasview_nycm70pure01-ct1')
    sas_view_file0 = fileinput.FileInput(sas_file_path0[0], openhook=fileinput.hook_compressed)
    sas_view_file1 = fileinput.FileInput(sas_file_path1[0], openhook=fileinput.hook_compressed)
    # NOTE: Logs pulled from: /logs/1199nbf.org/nycm70pure01-ct0/2018_06_06
    sas_view_lines0 = list(sas_view_file0)
    sas_view_lines1 = list(sas_view_file1)
    df_dict = {
        'Timestamp': [
            time_utils.Timestamp('2018-06-01 06:05:02'),
            time_utils.Timestamp('2018-06-01 06:05:02'),
            time_utils.Timestamp('2018-06-01 06:05:26'),
            time_utils.Timestamp('2018-06-01 06:05:26'),
        ],
        'controller': [
            'CT0',
            'CT0',
            'CT1',
            'CT1',
        ],
        'controller_model': [
            numpy.nan,
            {'CT0': 'FA-m70r2', 'CT1': None},
            numpy.nan,
            {'CT0': 'FA-m70r2', 'CT1': 'FA-m70r2'},
        ],
        'sas_view': [
            sas_view_lines0,
            numpy.nan,
            sas_view_lines1,
            numpy.nan,
        ],
        'source': [
            'hardware.log',
            'hardware.log',
            'hardware.log',
            'hardware.log',
        ]
    }
    sas_view_df = pandas.DataFrame(df_dict)
    cabling = sasview_utils.SASCabling('The String API!')
    # This ensures that all variables are populated.
    cabling.get_array_topology(sas_view_df)

    def test_get_array_topology(self):
        """Test the get_array_topology() method."""
        expected = [
            {'controller': 'CT1', 'shelf_conn': 'SH01.IOM1.C', 'slot': 'SLOT 100', 'to': 'SH01.SAS3', 'from': 'CT1.SAS0'},
            {'controller': 'CT1', 'shelf_conn': 'SH00.IOM0.C', 'slot': 'SLOT 100', 'to': 'SH00.SAS2', 'from': 'CT1.SAS1'},
            {'controller': 'CT1', 'shelf_conn': 'SH02.IOM1.A', 'slot': 'SLOT 100', 'to': 'SH02.SAS5', 'from': 'SH00.SAS1'},
            {'controller': 'CT1', 'shelf_conn': 'SH01.IOM0.A', 'slot': 'SLOT 101', 'to': 'SH01.SAS0', 'from': 'CT1.SAS2'},
            {'controller': 'CT1', 'shelf_conn': 'SH03.IOM1.A', 'slot': 'SLOT 101', 'to': 'SH03.SAS5', 'from': 'CT1.SAS3'},
            {'controller': 'CT1', 'shelf_conn': 'SH03.IOM0.C', 'slot': 'SLOT 201', 'to': 'SH03.SAS2', 'from': 'CT1.SAS4'},
            {'controller': 'CT1', 'shelf_conn': 'SH00.IOM1.A', 'slot': 'SLOT 201', 'to': 'SH00.SAS5', 'from': 'CT1.SAS5'},
            {'controller': 'CT1', 'shelf_conn': 'SH02.IOM0.C', 'slot': 'SLOT 201', 'to': 'SH02.SAS2', 'from': 'SH00.SAS4'},
            {'controller': 'CT0', 'shelf_conn': 'SH00.IOM1.C', 'slot': 'SLOT 100', 'to': 'SH00.SAS3', 'from': 'CT0.SAS0'},
            {'controller': 'CT0', 'shelf_conn': 'SH02.IOM0.C', 'slot': 'SLOT 100', 'to': 'SH02.SAS2', 'from': 'SH00.SAS4'},
            {'controller': 'CT0', 'shelf_conn': 'SH01.IOM0.C', 'slot': 'SLOT 100', 'to': 'SH01.SAS2', 'from': 'CT0.SAS1'},
            {'controller': 'CT0', 'shelf_conn': 'SH00.IOM0.A', 'slot': 'SLOT 101', 'to': 'SH00.SAS0', 'from': 'CT0.SAS2'},
            {'controller': 'CT0', 'shelf_conn': 'SH02.IOM1.A', 'slot': 'SLOT 101', 'to': 'SH02.SAS5', 'from': 'SH00.SAS1'},
            {'controller': 'CT0', 'shelf_conn': 'SH03.IOM0.A', 'slot': 'SLOT 101', 'to': 'SH03.SAS0', 'from': 'CT0.SAS3'},
            {'controller': 'CT0', 'shelf_conn': 'SH03.IOM1.C', 'slot': 'SLOT 201', 'to': 'SH03.SAS3', 'from': 'CT0.SAS4'},
            {'controller': 'CT0', 'shelf_conn': 'SH01.IOM1.A', 'slot': 'SLOT 201', 'to': 'SH01.SAS5', 'from': 'CT0.SAS5'}
        ]
        result = self.cabling.get_array_topology(self.sas_view_df)
        print('\n'.join(str(t) for t in result))
        self.assertEqual(result, expected)

    def test_generate_visual(self):
        """Test the generate_visual() method."""
        expected = [
            '[ SH03 ]',
            '+-------------------------------------------------------------------------------+',
            '|  IOM 0  SAS0:[  CT0.SAS3   ]  SAS1:[             ]  SAS2:[  CT1.SAS4   ]      |',
            '|                                                                               |',
            '|  IOM 1  SAS3:[  CT0.SAS4   ]  SAS4:[             ]  SAS5:[  CT1.SAS3   ]      |',
            '+-------------------------------------------------------------------------------+',
            '',
            '[ SH02 ]',
            '+-------------------------------------------------------------------------------+',
            '|  IOM 0  SAS0:[             ]  SAS1:[             ]  SAS2:[  SH00.SAS4  ]      |',
            '|                                                                               |',
            '|  IOM 1  SAS3:[             ]  SAS4:[             ]  SAS5:[  SH00.SAS1  ]      |',
            '+-------------------------------------------------------------------------------+',
            '',
            '[ SH01 ]',
            '+-------------------------------------------------------------------------------+',
            '|  IOM 0  SAS0:[  CT1.SAS2   ]  SAS1:[             ]  SAS2:[  CT0.SAS1   ]      |',
            '|                                                                               |',
            '|  IOM 1  SAS3:[  CT1.SAS0   ]  SAS4:[             ]  SAS5:[  CT0.SAS5   ]      |',
            '+-------------------------------------------------------------------------------+',
            '',
            '[ SH00 ]',
            '+-------------------------------------------------------------------------------+',
            '|  IOM 0  SAS0:[  CT0.SAS2   ]  SAS1:[  SH02.SAS5  ]  SAS2:[  CT1.SAS1   ]      |',
            '|                                                                               |',
            '|  IOM 1  SAS3:[  CT0.SAS0   ]  SAS4:[  SH02.SAS2  ]  SAS5:[  CT1.SAS5   ]      |',
            '+-------------------------------------------------------------------------------+',
            '',
            '[ CT0 - FA-m70r2 ]',
            '+-------------------------------------------------------------------------------+',
            '|  SLOT 100  SAS0:[  SH00.SAS3  ]  SAS1:[  SH01.SAS2  ]                         |',
            '|                                                                               |',
            '|  SLOT 101  SAS2:[  SH00.SAS0  ]  SAS3:[  SH03.SAS0  ]                         |',
            '|                                                                               |',
            '|  SLOT 201  SAS4:[  SH03.SAS3  ]  SAS5:[  SH01.SAS5  ]                         |',
            '+-------------------------------------------------------------------------------+',
            '',
            '[ CT1 - FA-m70r2 ]',
            '+-------------------------------------------------------------------------------+',
            '|  SLOT 100  SAS0:[  SH01.SAS3  ]  SAS1:[  SH00.SAS2  ]                         |',
            '|                                                                               |',
            '|  SLOT 101  SAS2:[  SH01.SAS0  ]  SAS3:[  SH03.SAS5  ]                         |',
            '|                                                                               |',
            '|  SLOT 201  SAS4:[  SH03.SAS2  ]  SAS5:[  SH00.SAS5  ]                         |',
            '+-------------------------------------------------------------------------------+',
            ''
        ]
        result = self.cabling.generate_visual()
        self.assertEqual(result, expected)

    def test_get_error_table(self):
        """Test the generate_visual() method."""
        expected = [
            '+---[ CT0 Errors ]--------------------------------------------------------------+',
            '\x1b[1mSlot 201: SAS HBA has incorrect firmware revision.\x1b[0m',
            '\x1b[1mSH00.SAS1: SAS IOM port is cabled to wrong IOM on next enclosure.\x1b[0m',
            '\x1b[1mSH00.SAS4: SAS IOM port is cabled to wrong IOM on next enclosure.\x1b[0m',
            '\x1b[1mCT0.SAS4: Unexpected enclosure ID. Enclosure ID is set to 3, and not the expected ID of 4.\x1b[0m',
            '\x1b[1mCT0.SAS4: SAS HBA port is cabled to wrong enclosure IOM.\x1b[0m',
            '\x1b[1mCT0.SAS3: SAS HBA port is cabled to wrong enclosure IOM.\x1b[0m',
            '+-------------------------------------------------------------------------------+',
            '',
            '+---[ CT1 Errors ]--------------------------------------------------------------+',
            '\x1b[1mSlot 201: SAS HBA has incorrect firmware revision.\x1b[0m',
            '\x1b[1mSH00.SAS1: SAS IOM port is cabled to wrong IOM on next enclosure.\x1b[0m',
            '\x1b[1mSH00.SAS4: SAS IOM port is cabled to wrong IOM on next enclosure.\x1b[0m',
            '\x1b[1mCT1.SAS4: Unexpected enclosure ID. Enclosure ID is set to 3, and not the expected ID of 4.\x1b[0m',
            '+-------------------------------------------------------------------------------+',
            ''
        ]
        result = self.cabling.get_error_table()
        self.assertEqual(result, expected)
        expected = defaultdict(list, {
            'CT0': [
                'Slot 201: SAS HBA has incorrect firmware revision.',
                'SH00.SAS1: SAS IOM port is cabled to wrong IOM on next enclosure.',
                'SH00.SAS4: SAS IOM port is cabled to wrong IOM on next enclosure.',
                'CT0.SAS4: Unexpected enclosure ID. Enclosure ID is set to 3, and not the expected ID of 4.',
                'CT0.SAS4: SAS HBA port is cabled to wrong enclosure IOM.',
                'CT0.SAS3: SAS HBA port is cabled to wrong enclosure IOM.'
            ],
            'CT1': [
                'Slot 201: SAS HBA has incorrect firmware revision.',
                'SH00.SAS1: SAS IOM port is cabled to wrong IOM on next enclosure.',
                'SH00.SAS4: SAS IOM port is cabled to wrong IOM on next enclosure.',
                'CT1.SAS4: Unexpected enclosure ID. Enclosure ID is set to 3, and not the expected ID of 4.'
            ]
        })
        self.assertEqual(self.cabling.parsed_errors, expected)

    def test_parse_slot_summary(self):
        """Test the _parse_slot_summary() method."""
        # FA-450 with 6 shelves
        # /logs/bakernet.com/bmgdcsan99-ct0/2018_06_26
        lines_01 = [
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '1.0] <---> [A:4.0:B] <---> [C:5.0:A*',
            '                  |               \B*',
            '                  \C] <---> [Unknown device 500605b008d189b4',
            '',
            '1.1] <---> [A:1.1:B] <---> [A:3.1:B*',
            '                  |               \C*',
            '                  \C] <---> [Unknown device 500605b008d186e4',
            '',
            '2.0] <---> [A:0.0:B] <---> [C:2.0:A*',
            '                  |               \B*',
            '                  \C] <---> [Unknown device 500605b008d186e0',
            '',
            '2.1] <---> [C:4.1:A] <---> [Unknown device 500605b008d186b0',
            '                  \B] <---> [A:5.1:B*',
            '                                  \C*',
            '',
            '3.0] <---> [C:0.1:A] <---> [Unknown device 500605b008d189b0',
            '                  \B] <---> [A:2.1:B*',
            '                                  \C*',
            '',
            '3.1] <---> [C:1.0:A] <---> [Unknown device 500605b008d186b4',
            '                  \B] <---> [C:3.0:A*',
            '                                  \B*',
        ]
        expected_01 = {
            '1.0': defaultdict(list, {
                'chain': ['SH04.IOM0.A', 'SH04.IOM0.B', 'SH05.IOM0.C'],
                'conn': ['SH04.IOM0', 'SH05.IOM0'],
                'slot': 'SLOT 1',
                'port': 'SAS0'}),
            '1.1': defaultdict(list, {
                'chain': ['SH01.IOM1.A', 'SH01.IOM1.B', 'SH03.IOM1.A'],
                'conn': ['SH01.IOM1', 'SH03.IOM1'],
                'slot': 'SLOT 1',
                'port': 'SAS1'}),
            '2.0': defaultdict(list, {
                'chain': ['SH00.IOM0.A', 'SH00.IOM0.B', 'SH02.IOM0.C'],
                'conn': ['SH00.IOM0', 'SH02.IOM0'],
                'slot': 'SLOT 2',
                'port': 'SAS2'}),
            '2.1': defaultdict(list, {
                'chain': ['SH04.IOM1.C', 'SH04.IOM1.B', 'SH05.IOM1.A'],
                'conn': ['SH04.IOM1', 'SH05.IOM1'],
                'slot': 'SLOT 2',
                'port': 'SAS3'}),
            '3.0': defaultdict(list, {
                'chain': ['SH00.IOM1.C', 'SH00.IOM1.B', 'SH02.IOM1.A'],
                'conn': ['SH00.IOM1', 'SH02.IOM1'],
                'slot': 'SLOT 3',
                'port': 'SAS4'}),
            '3.1': defaultdict(list, {
                'chain': ['SH01.IOM0.C', 'SH01.IOM0.B', 'SH03.IOM0.C'],
                'conn': ['SH01.IOM0', 'SH03.IOM0'],
                'slot': 'SLOT 3',
                'port': 'SAS5'}),
        }
        # Array from PT-1767 terrible cabling on a FA-405.
        # /logs/basusa.com/dr-bas400pure-ct0/2018_04_12
        lines_02 = [
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '1.0] <---> [A:1.1:B] <---> [B:0.1:A*',
            '                  |               \C] <---> [Unknown device 500605b009119a60',
            '                  \C*',
            '',
            '1.1] <---> [C:1.0:A*',
            '                  \B] <---> [B:0.0:A] <---> [Unknown device 500605b009119a64',
            '                                  \C*',
        ]
        expected_02 = {
            '1.0': defaultdict(list, {
                'chain': ['SH01.IOM1.A', 'SH01.IOM1.B', 'SH00.IOM1.B'],
                'conn': ['SH01.IOM1', 'SH00.IOM1'],
                'slot': 'SLOT 1',
                'port': 'SAS0'}),
            '1.1': defaultdict(list, {
                'chain': ['SH01.IOM0.C', 'SH01.IOM0.B', 'SH00.IOM0.B'],
                'conn': ['SH01.IOM0', 'SH00.IOM0'],
                'slot': 'SLOT 1',
                'port': 'SAS1'}),
        }
        # FA-420 with incorrect cabling.
        # /logs/purestorage.com/slc-coz-ct1/2018_06_27
        lines_03 = [
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '2.0] <---> [A:1.0:B*',
            '                  \C] <---> [Unknown device 500605b005a72940',
            '',
            '2.1] <---> [A:0.1:B] <---> [B:2.1:A*',
            '                  |               \C*',
            '                  \C] <---> [Unknown device 500605b005a72944',
            '',
            '3.0] <---> [C:1.1:A] <---> [Unknown device 500605b005a728c0',
            '                  \B*',
            '',
            '3.1] <---> [C:0.0:A] <---> [Unknown device 500605b005a728c4',
            '                  \B] <---> [B:2.0:A*',
            '                                  \C*',
        ]
        expected_03 = {
            '2.0': defaultdict(list, {
                'chain': ['SH01.IOM0.A'],
                'conn': ['SH01.IOM0'],
                'slot': 'SLOT 2',
                'port': 'SAS0'}),
            '2.1': defaultdict(list, {
                'chain': ['SH00.IOM1.A', 'SH00.IOM1.B', 'SH02.IOM1.B'],
                'conn': ['SH00.IOM1', 'SH02.IOM1'],
                'slot': 'SLOT 2',
                'port': 'SAS1'}),
            '3.0': defaultdict(list, {
                'chain': ['SH01.IOM1.C'],
                'conn': ['SH01.IOM1'],
                'slot': 'SLOT 3',
                'port': 'SAS2'}),
            '3.1': defaultdict(list, {
                'chain': ['SH00.IOM0.C', 'SH00.IOM0.B', 'SH02.IOM0.B'],
                'conn': ['SH00.IOM0', 'SH02.IOM0'],
                'slot': 'SLOT 3',
                'port': 'SAS3'}),
        }
        # FA-m50r2 with incorrect cabling and Non-HA.
        # /logs/greendotcorp.com/gdcpurearray01-ct1/2018_01_23
        lines_04 = [
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '0.0] <---> [L:0.0',
            '100.0] <---> [C:1.1:A] <---> [Unknown device 500605b00cf12790',
            '                  \B] <---> [A:3.1:B*',
            '                                  \C*',
            '',
            '100.1] <---> [C:0.0:A] <---> [Unknown device 524a9370001c1664',
            '                  \B] <---> [C:2.0:A*',
            '                                  \B*',
            '',
            '101.0] <---> [A:1.0:B] <---> [C:3.0:A*',
            '                  |               \B*',
            '                  \C] <---> [Unknown device 524a9370001c1670',
            '',
            '101.1] <---> [A:4.1:B] <---> [A:5.1:B*',
            '                  |               \C*',
            '                  \C] <---> [Unknown device 524a9370001c1660',
        ]
        expected_04 = {
            '100.0': defaultdict(list, {
                'chain': ['SH01.IOM1.C', 'SH01.IOM1.B', 'SH03.IOM1.A'],
                'conn': ['SH01.IOM1', 'SH03.IOM1'],
                'slot': 'SLOT 100',
                'port': 'SAS0'}),
            '100.1': defaultdict(list, {
                'chain': ['SH00.IOM0.C', 'SH00.IOM0.B', 'SH02.IOM0.C'],
                'conn': ['SH00.IOM0', 'SH02.IOM0'],
                'slot': 'SLOT 100',
                'port': 'SAS1'}),
            '101.0': defaultdict(list, {
                'chain': ['SH01.IOM0.A', 'SH01.IOM0.B', 'SH03.IOM0.C'],
                'conn': ['SH01.IOM0', 'SH03.IOM0'],
                'slot': 'SLOT 101',
                'port': 'SAS2'}),
            '101.1': defaultdict(list, {
                'chain': ['SH04.IOM1.A', 'SH04.IOM1.B', 'SH05.IOM1.A'],
                'conn': ['SH04.IOM1', 'SH05.IOM1'],
                'slot': 'SLOT 101',
                'port': 'SAS3'}),
        }
        # ES-27129: This array has illegal topology and this makes sure that the connection
        # to the HBA is not included in the map. When generating the view it will add an error.
        lines_05 = [
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '0.0*',
            '',
            '0.1] <---> [L:0.0:R*',
            '',
            '100.0] <---> [C:0.1:A] <---> [Unknown device 524a937000173480',
            '                  \B] <---> [A:1.0:B*',
            '                                  \C] <---> [100.1',
            '',
            '100.1] <---> [C:1.0:A] <---> [B:0.1:A] <---> [Unknown device 524a937000173480',
            '                  |               \C] <---> [100.0',
            '                  \B*',
            '',
            '101.0] <---> [A:0.0:B] <---> [C:1.1:A] <---> [101.1',
            '                  |               \B*',
            '                  \C] <---> [Unknown device 524a937000173490',
            '',
            '101.1] <---> [A:1.1:B*',
            '                  \C] <---> [B:0.0:A] <---> [101.0',
            '                                  \C] <---> [Unknown device 524a937000173490',
        ]
        expected_05 = {
            '100.0': defaultdict(list, {
                'chain': ['SH00.IOM1.C', 'SH00.IOM1.B', 'SH01.IOM0.A'],
                'conn': ['SH00.IOM1', 'SH01.IOM0'],
                'slot': 'SLOT 100',
                'port': 'SAS0'}),
            '100.1': defaultdict(list, {
                'chain': ['SH01.IOM0.C', 'SH01.IOM0.A', 'SH00.IOM1.B'],
                'conn': ['SH01.IOM0', 'SH00.IOM1'],
                'slot': 'SLOT 100',
                'port': 'SAS1'}),
            '101.0': defaultdict(list, {
                'chain': ['SH00.IOM0.A', 'SH00.IOM0.B', 'SH01.IOM1.C'],
                'conn': ['SH00.IOM0', 'SH01.IOM1'],
                'slot': 'SLOT 101',
                'port': 'SAS2'}),
            '101.1': defaultdict(list, {
                'chain': ['SH01.IOM1.A', 'SH01.IOM1.C', 'SH00.IOM0.B'],
                'conn': ['SH01.IOM1', 'SH00.IOM0'],
                'slot': 'SLOT 101',
                'port': 'SAS3'}),
        }
        # FA-X50R2 with no SAS shelves and only Xenon shelves.
        # /logs/saiglobal.com/ushdc1-copafa01-ct0/2018_07_04
        lines_06 = [
            'ct0.eth7. (eth7 )] *',
            '',
            'ct0.eth9. (eth9 )] *',
            '',
            'ct0.eth6. (eth6 )] <---> [0.eth0 (eth0) SH9 .0     ]',
            '',
            'ct0.eth8. (eth8 )] <---> [1.eth0 (eth0) SH9 .1     ]',
        ]
        expected_06 = {}
        # PT-2314 where <-!-> breaks the indexing.
        # /logs/aqr.com/mt0dpur01-ct0/2018_07_31
        lines_07 = [
            's.p  <- ->  I:##.#:O  <- -> ...',
            '----       ----------       ---',
            '0.0] <---> [L:0.0',
            '100.0] <-!-> [C:1.1:A] <---> [Unknown device 500605b00a649be0',
            '                  \B] <---> [A:3.1:B*',
            '                                  \C*',
            '',
            '100.1] <---> [C:0.0:A] <---> [Unknown device 524a937000180bc4',
            '                  \B] <---> [C:2.0:A*',
            '                                  \B*',
            '',
            '101.0] <---> [A:1.0:B] <---> [C:3.0:A*',
            '                  |               \B*',
            '                  \C] <---> [Unknown device 524a937000180bd0',
            '',
            '101.1*',
            '',
            '201.0*',
            '',
            '201.1] <---> [A:0.1:B] <---> [A:2.1:B*',
            '                  |               \C*',
            '                  \C] <---> [Unknown device 524a937000180bd4',
        ]
        expected_07 = {
            '100.0': {
                'chain': ['SH01.IOM1.C', 'SH01.IOM1.B', 'SH03.IOM1.A'],
                'conn': ['SH01.IOM1', 'SH03.IOM1'],
                'slot': 'SLOT 100',
                'port': 'SAS0',
            },
            '100.1': {
                'chain': ['SH00.IOM0.C', 'SH00.IOM0.B', 'SH02.IOM0.C'],
                'conn': ['SH00.IOM0', 'SH02.IOM0'],
                'slot': 'SLOT 100',
                'port': 'SAS1',
            },
            '101.0': {
                'chain': ['SH01.IOM0.A', 'SH01.IOM0.B', 'SH03.IOM0.C'],
                'conn': ['SH01.IOM0', 'SH03.IOM0'],
                'slot': 'SLOT 101',
                'port': 'SAS2',
            },
            '101.1': {
                'chain': [],
                'conn': [],
                'slot': 'SLOT 101',
                'port': 'SAS3',
            },
            '201.0': {
                'chain': [],
                'conn': [],
                'slot': 'SLOT 201',
                'port': 'SAS4',
            },
            '201.1': {
                'chain': ['SH00.IOM1.A', 'SH00.IOM1.B', 'SH02.IOM1.A'],
                'conn': ['SH00.IOM1', 'SH02.IOM1'],
                'slot': 'SLOT 201',
                'port': 'SAS5',
            },
        }
        # Joining test data so that if a test fails it is easy to see why.
        tests = [
            ('FA-450 with 6 shelves', lines_01, expected_01),
            ('Array from PT-1767 terrible cabling on a FA-405', lines_02, expected_02),
            ('FA-420 with incorrect cabling', lines_03, expected_03),
            ('FA-m50r2 with incorrect cabling and Non-HA', lines_04, expected_04),
            ('FA-m50 with illegal cabling', lines_05, expected_05),
            ('FA-X50R2 with no SAS shelves and only Xenon shelves.', lines_06, expected_06),
            ('FA-m70r2 with <-!-> in the Slot Summary.', lines_07, expected_07),
        ]
        for msg, lines, expected in tests:
            fail_msg = 'Test "{}" failed.'.format(msg)
            self.cabling.parsed_errors = defaultdict(list)
            result = self.cabling._parse_slot_summary(lines, 'CT0')
            if 'illegal' in msg:
                # Verify that we have error messages for illegal cabling.
                self.assertTrue(self.cabling.parsed_errors['CT0'])
            for key, value in expected.items():
                self.assertEqual(result[key], value, msg=fail_msg)
